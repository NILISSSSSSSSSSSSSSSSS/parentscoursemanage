(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-f60f9594"],{"013f":function(t,e,i){var a=i("4ce5"),s=i("224c"),n=i("008a"),o=i("eafa"),r=i("5dd2");t.exports=function(t,e){var i=1==t,l=2==t,c=3==t,u=4==t,d=6==t,m=5==t||d,f=e||r;return function(e,r,h){for(var p,b,g=n(e),v=s(g),y=a(r,h,3),w=o(v.length),F=0,k=i?f(e,w):l?f(e,0):void 0;w>F;F++)if((m||F in v)&&(p=v[F],b=y(p,F,g),t))if(i)k[F]=b;else if(b)switch(t){case 3:return!0;case 5:return p;case 6:return F;case 2:k.push(p)}else if(u)return!1;return d?-1:c||u?u:k}}},"0c8f":function(t,e,i){},"11f3":function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"all-user pr"},[i("el-tabs",{on:{"tab-click":t.handleClick},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[i("el-tab-pane",{attrs:{label:"轮播图",name:"banner"}},[i("bannerList")],1),i("el-tab-pane",{attrs:{label:"大咖直播",name:"star"}},[i("starLiveList")],1),i("el-tab-pane",{attrs:{label:"非固定栏目展示",name:"menu"}},[i("otherMenuList")],1),i("el-tab-pane",{attrs:{label:"猜你喜欢",name:"guess"}},[i("guessList")],1),i("el-tab-pane",{attrs:{label:"搜索词设置",name:"hot"}},[i("keyWordList")],1),i("el-tab-pane",{attrs:{label:"购买须知管理",name:"purchaseInstructions"}},[i("purchaseInstruct")],1)],1)],1)},s=[],n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"all-user"},[i("el-row",{staticClass:"tc mt20"},[i("el-button",{staticClass:"mb20",attrs:{type:"primary",icon:"el-icon-plus",size:"small"},on:{click:function(e){return t.showEdit(0)}}},[t._v("新增轮播图")])],1),i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"mt20 mb20",attrs:{data:t.list,border:"",stripe:""}},[i("el-table-column",{attrs:{prop:"sortNum",label:"排序"}}),i("el-table-column",{attrs:{prop:"name",label:"标题"}}),i("el-table-column",{attrs:{label:"图片"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[i("div",{staticClass:"tableAvaterBox"},[i("img",{staticClass:"tableAvater",attrs:{src:a.icon,alt:""},on:{click:function(e){return t.$viewImage(a.icon,"picture")}}})])]}}])}),i("el-table-column",{attrs:{label:"轮播类型"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.row;return[t._v("\n        "+t._s(t._f("bannerType")(i.type))+"\n      ")]}}])}),i("el-table-column",{attrs:{label:"显示时间"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.row;return[t._v("\n        "+t._s(t._f("formatDate")(i.startTime))+" - "+t._s(t._f("formatDate")(i.endTime))+"\n      ")]}}])}),i("el-table-column",{attrs:{label:"状态"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.row;return[t._v("\n        "+t._s(t._f("bannerStatus")(i.status))+"\n      ")]}}])}),i("el-table-column",{attrs:{label:"操作",width:"360px"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[i("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"向上",placement:"top"}},[i("el-button",{attrs:{icon:"el-icon-top",circle:""},on:{click:function(e){return t.changeWeight(a,"up")}}})],1),i("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"向下",placement:"top"}},[i("el-button",{attrs:{icon:"el-icon-bottom",circle:""},on:{click:function(e){return t.changeWeight(a,"down")}}})],1),i("el-button",{staticClass:"mt10",attrs:{icon:"el-icon-edit",type:"primary",size:"small"},on:{click:function(e){return t.showEdit(1,a)}}},[t._v("编辑")]),i("el-button",{staticClass:"mt10",attrs:{icon:"el-icon-info",type:"warning",size:"small"},on:{click:function(e){return t.changeStatus(a)}}},[t._v("\n          "+t._s(1===a.status?"停用":"启用"))]),i("el-button",{staticClass:"mt10",attrs:{icon:"el-icon-delete",type:"danger",size:"small"},on:{click:function(e){return t.del(a.uuid)}}},[t._v("删除")])]}}])})],1),i("editBanner",{attrs:{menuObj:t.menuObj},on:{closeMain:t.closeMain,freshParent:function(e){return t.searchList()}}})],1)},o=[],r=(i("e204"),function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("el-dialog",{attrs:{visible:t.menuObj.isShow,title:t.menuObj.isEdit?"编辑轮播图":"新增轮播图",width:"600px","close-on-click-modal":!1},on:{"update:visible":function(e){return t.$set(t.menuObj,"isShow",e)}}},[i("el-form",{ref:"editForm",attrs:{inline:"",rules:t.rules,model:t.editForm,labelPosition:"right",labelWidth:"100px"}},[i("el-form-item",{attrs:{prop:"name",label:"标题：",rules:t.notEmptyBlur}},[i("el-input",{attrs:{placeholder:"标题",clearable:"",maxlength:"20",size:"small"},model:{value:t.editForm.name,callback:function(e){t.$set(t.editForm,"name",e)},expression:"editForm.name"}})],1),i("el-form-item",{attrs:{label:"轮播图：",prop:"icon",rules:t.notEmptyBlur}},[i("el-upload",{staticClass:"avatar-uploader",attrs:{action:"","show-file-list":!1,"before-upload":t.beforeImgUpload}},[t.editForm.icon?i("img",{staticClass:"avatar banner-avatar",attrs:{src:t.editForm.icon}}):i("i",{staticClass:"el-icon-plus avatar-uploader-icon banner-avatar"})])],1),i("el-form-item",{attrs:{label:"轮播类型：",prop:"type",rules:t.notEmptyChange}},[i("el-select",{attrs:{size:"small",prop:"type",rules:t.notEmptyChange},on:{change:function(e){t.editForm.target=""}},model:{value:t.editForm.type,callback:function(e){t.$set(t.editForm,"type",e)},expression:"editForm.type"}},t._l(t.bannerType,(function(t,e){return i("el-option",{key:e,attrs:{label:t.label,value:t.value}})})),1)],1),i("el-form-item",{attrs:{label:"跳转到：",prop:"target",rules:2==t.editForm.type?t.notEmptyBlur:t.notEmptyChange}},[2==t.editForm.type?i("el-input",{attrs:{size:"small",clearable:"",placeholder:"请输入网址"},model:{value:t.editForm.target,callback:function(e){t.$set(t.editForm,"target",e)},expression:"editForm.target"}}):i("el-select",{attrs:{size:"small",filterable:"",placeholder:"请选择课程"},model:{value:t.editForm.target,callback:function(e){t.$set(t.editForm,"target",e)},expression:"editForm.target"}},t._l(t.courseList,(function(t,e){return i("el-option",{key:e,attrs:{label:t.name,value:t.uuid}})})),1)],1),i("el-form-item",{attrs:{label:"展示时间：",prop:"timeBox",rules:t.notEmptyChange}},[i("el-date-picker",{attrs:{type:"datetimerange","default-time":["00:00:00","23:59:59"],"range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","picker-options":t.disabledOptions,size:"small"},model:{value:t.editForm.timeBox,callback:function(e){t.$set(t.editForm,"timeBox",e)},expression:"editForm.timeBox"}})],1),i("el-form-item",{attrs:{prop:"status",label:"启用状态：",rules:t.notEmptyChange}},[i("el-radio-group",{model:{value:t.editForm.status,callback:function(e){t.$set(t.editForm,"status",e)},expression:"editForm.status"}},[i("el-radio",{attrs:{label:"1"}},[t._v("启用")]),i("el-radio",{attrs:{label:"2"}},[t._v("禁用")])],1)],1)],1),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(e){return t.closeDialog()}}},[t._v("取 消")]),i("el-button",{attrs:{type:"primary",loading:t.loadingButton},on:{click:function(e){return t.save()}}},[t._v("确 定")])],1)],1)],1)}),l=[],c=(i("ed63"),i("8cf2"),i("163d"),i("3191")),u={props:{menuObj:{type:Object,default:function(){return{}}}},components:{},data:function(){return{roleList:[],time:[],bannerType:[{label:"课程",value:"1"},{label:"外部链接",value:"2"}],editForm:{type:"2",timeBox:[],target:""},disabledOptions:{disabledDate:function(t){return t.getTime()<Date.now()-864e5}},courseList:[],notEmptyBlur:[{required:!0,message:"不能为空",trigger:"blur"}],notEmptyChange:[{required:!0,message:"不能为空",trigger:"change"}],loadingButton:!1,rules:{}}},mounted:function(){this.searchList()},methods:{save:function(){var t=this;this.$refs["editForm"].validate((function(e){if(!e)return console.log("error submit!!"),!1;if(t.editForm.icon){if(2==t.editForm.type){var i=t.editForm.target.substring(0,7),a=t.editForm.target.substring(0,8);if("http://"!=i&&"https://"!=a)return void t.$message.error("网址必须是以http://或者https://开头")}var s=JSON.parse(JSON.stringify(t.editForm)),n=t.$utils.formatDate(t.editForm.timeBox[0],"yyyy-MM-dd hh:mm:ss"),o=t.$utils.formatDate(t.editForm.timeBox[1],"yyyy-MM-dd hh:mm:ss"),r=[Number(s.type),Number(s.status),n,o];s.type=r[0],s.status=r[1],s.startTime=r[2],s.endTime=r[3],console.log(s);var l=null;t.menuObj.isEdit?(l=c["n"],s.uuid=t.editForm.uuid):l=c["l"],t.loadingButton=!0,l(s).then((function(e){t.loadingButton=!1,200===e.code&&(t.$message.success("成功"),t.$emit("freshParent"),t.closeDialog())})).catch((function(e){t.loadingButton=!1}))}else t.$message.error("请上传轮播图")}))},resetForm:function(){this.editForm={type:"2",timeBox:[],target:""}},closeDialog:function(){var t={isShowEdit:!1};this.$emit("closeMain",t)},searchList:function(){var t=this,e={page:1,pageSize:1e5};Object(c["k"])(e).then((function(e){if(200===e.code)if(console.log("课程数据"+JSON.stringify(e.data.results)),e.data&&e.data.count>0){var i=[e.data.results];t.courseList=i[0]}else t.courseList=[]})).catch((function(e){t.loading=!1}))},beforeImgUpload:function(t){var e=this,i=["image/jpeg","image/png"].includes(t.type),a=t.size/1024/1024<2;return i?a?void this.$uploadFile.checkedFileMD5ByFile(t,(function(t){e.$set(e.editForm,"icon",t.url)})):(this.$message.error("轮播图大小不能超过2MB!"),!1):(this.$message.error("轮播图只能是JPG或者PNG格式!"),!1)}},watch:{"menuObj.isShow":function(t,e){if(t)if(this.$refs["editForm"]&&this.$refs["editForm"].resetFields(),this.menuObj.isEdit){this.editForm=JSON.parse(JSON.stringify(this.menuObj.data));var i=[this.editForm.type+"",this.editForm.status+""];this.editForm.type=i[0],this.editForm.status=i[1],this.$set(this.editForm,"timeBox",[this.editForm.startTime,this.editForm.endTime])}else this.resetForm()}}},d=u,m=(i("4111"),i("5511")),f=Object(m["a"])(d,r,l,!1,null,"f59a749e",null),h=f.exports,p={components:{editBanner:h},data:function(){return{list:[],page:{page:1,limit:1e3,total:0},menuObj:{isShow:!1,isEdit:!1,data:{}},loading:!1}},mounted:function(){this.searchList()},methods:{searchList:function(){var t=this,e={page:this.page.page,pageSize:this.page.limit};this.loading=!0,Object(c["o"])(e).then((function(e){if(200===e.code)if(console.log("banner数据："+JSON.stringify(e.data.results)),e.data&&e.data.count>0){var i=[e.data.results,e.data.count];t.list=i[0],t.page.total=i[1]}else{var a=[[],0];t.list=a[0],t.page.total=a[1]}t.loading=!1})).catch((function(e){t.loading=!1}))},changeWeight:function(t,e){var i=this,a=this.list.findIndex((function(e){return e.uuid==t.uuid})),s={uuid:t.uuid};if("up"==e){if(a-1<0)return void this.$message.error("已经是第一个了");s.swapBannerUuid=this.list[a-1].uuid}else{if(a+1>this.list.length-1)return void this.$message.error("已经是最后一个了");s.swapBannerUuid=this.list[a+1].uuid}Object(c["p"])(s).then((function(t){200===t.code&&(i.$message.success("成功"),i.searchList())}))},showEdit:function(t,e){this.menuObj={isShow:!0,isEdit:!!t,data:t?e:{}}},changePage:function(t,e){this.page.limit=e,this.page.page=t,this.searchList()},changeStatus:function(t){var e=this;this.loading=!0;var i={uuid:t.uuid};Object(c["j"])(i).then((function(t){200===t.code&&e.searchList(),e.loading=!1})).catch((function(t){e.loading=!1}))},del:function(t){var e=this;this.$confirm("确定删除?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var i={uuid:t};Object(c["m"])(i).then((function(t){200===t.code&&(e.$message.success("成功"),e.searchList())}))})).catch((function(){}))},closeMain:function(t){this.menuObj.isShow=!1}}},b=p,g=(i("62d3"),Object(m["a"])(b,n,o,!1,null,"2d4a4622",null)),v=g.exports,y=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"all-user"},[i("el-row",{staticClass:"tc mt20"},[i("el-button",{staticClass:"mb20",attrs:{type:"primary",icon:"el-icon-plus",size:"small"},on:{click:function(e){return t.showEdit(0)}}},[t._v("新增大咖直播")])],1),i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"mt20 mb20",attrs:{data:t.list,border:"",stripe:""}},[i("el-table-column",{attrs:{prop:"sortNum",label:"排序"}}),i("el-table-column",{attrs:{prop:"name",label:"课程名称"}}),i("el-table-column",{attrs:{label:"图片"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[i("div",{staticClass:"tableAvaterBox"},[i("img",{staticClass:"tableAvater",attrs:{src:a.icon,alt:""},on:{click:function(e){return t.$viewImage(a.icon,"picture")}}})])]}}])}),i("el-table-column",{attrs:{label:"显示时间"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.row;return[t._v("\n        "+t._s(t._f("formatDate")(i.startTime))+" - "+t._s(t._f("formatDate")(i.endTime))+"\n      ")]}}])}),i("el-table-column",{attrs:{label:"状态"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.row;return[t._v("\n        "+t._s(t._f("bannerStatus")(i.status))+"\n      ")]}}])}),i("el-table-column",{attrs:{label:"操作",width:"360px"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[i("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"向上",placement:"top"}},[i("el-button",{attrs:{icon:"el-icon-top",circle:""},on:{click:function(e){return t.changeWeight(a,"up")}}})],1),i("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"向下",placement:"top"}},[i("el-button",{attrs:{icon:"el-icon-bottom",circle:""},on:{click:function(e){return t.changeWeight(a,"down")}}})],1),i("el-button",{staticClass:"mt10",attrs:{icon:"el-icon-edit",type:"primary",size:"small"},on:{click:function(e){return t.showEdit(1,a)}}},[t._v("编辑\n        ")]),i("el-button",{staticClass:"mt10",attrs:{icon:"el-icon-info",type:"warning",size:"small"},on:{click:function(e){return t.changeStatus(a)}}},[t._v("\n          "+t._s(1===a.status?"停用":"启用"))]),i("el-button",{staticClass:"mt10",attrs:{icon:"el-icon-delete",type:"danger",size:"small"},on:{click:function(e){return t.del(a.uuid)}}},[t._v("删除")])]}}])})],1),i("pagination",{attrs:{currentPage:t.page.page,pageSize:t.page.limit,total:t.page.total},on:{change:t.changePage}}),i("editStarLive",{attrs:{menuObj:t.menuObj},on:{closeMain:t.closeMain,freshParent:function(e){return t.searchList()}}})],1)},w=[],F=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("el-dialog",{attrs:{visible:t.menuObj.isShow,title:t.menuObj.isEdit?"编辑大咖直播":"新增大咖直播",width:"600px","close-on-click-modal":!1},on:{"update:visible":function(e){return t.$set(t.menuObj,"isShow",e)}}},[i("el-form",{ref:"editForm",attrs:{inline:"",rules:t.rules,model:t.editForm,labelPosition:"right",labelWidth:"100px"}},[i("el-form-item",{attrs:{prop:"course",rules:t.notEmptyBlur,label:"跳转课程："}},[i("el-select",{staticClass:"w200 ml10",attrs:{"remote-method":t.getNowGoods,placeholder:"请搜索课程名称",size:"small",filterable:"",remote:"","reserve-keyword":"",clearable:""},model:{value:t.editForm.course,callback:function(e){t.$set(t.editForm,"course",e)},expression:"editForm.course"}},t._l(t.goodsList,(function(t,e){return i("el-option",{key:e,attrs:{label:t.name,value:t.uuid}})})),1)],1),i("el-form-item",{attrs:{prop:"icon",label:"条幅图片：",rules:t.notEmptyChange}},[i("el-upload",{staticClass:"avatar-uploader",attrs:{action:"","show-file-list":!1,"before-upload":t.beforeImgUpload}},[t.editForm.icon?i("img",{staticClass:"avatar banner-avatar",attrs:{src:t.editForm.icon}}):i("i",{staticClass:"el-icon-plus avatar-uploader-icon banner-avatar"})])],1),i("el-form-item",{attrs:{label:"展示时间：",prop:"timeBox",rules:t.notEmptyChange}},[i("el-date-picker",{attrs:{"default-time":["00:00:00","23:23:23"],type:"datetimerange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","picker-options":t.disabledOptions,size:"small"},model:{value:t.editForm.timeBox,callback:function(e){t.$set(t.editForm,"timeBox",e)},expression:"editForm.timeBox"}})],1)],1),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(e){return t.closeDialog()}}},[t._v("取 消")]),i("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.save()}}},[t._v("确 定")])],1)],1)],1)},k=[],_=(i("cc57"),{props:{menuObj:{type:Object,default:function(){return{}}}},components:{},data:function(){return{time:[],editForm:{timeBox:[],icon:"",course:""},goodsList:[],disabledOptions:{disabledDate:function(t){return t.getTime()<Date.now()-864e5}},rules:{},notEmptyBlur:[{required:!0,message:"不能为空",trigger:"blur"}],notEmptyChange:[{required:!0,message:"不能为空",trigger:"change"}]}},methods:{save:function(){var t=this;this.$refs["editForm"].validate((function(e){if(!e)return console.log("error submit!!"),!1;if(t.editForm.icon){var i=JSON.parse(JSON.stringify(t.editForm)),a=t.$utils.formatDate(t.editForm.timeBox[0],"yyyy-MM-dd hh:mm:ss"),s=t.$utils.formatDate(t.editForm.timeBox[1],"yyyy-MM-dd hh:mm:ss"),n=[a,s];i.startTime=n[0],i.endTime=n[1],console.log(i);var o=null;t.menuObj.isEdit?(o=c["w"],i.uuid=t.editForm.uuid):o=c["q"],o(i).then((function(e){200===e.code&&(t.$message.success("成功"),t.$emit("freshParent"),t.closeDialog())})).catch((function(t){}))}else t.$message.error("请上传图片")}))},getNowGoods:function(t){var e=this;return new Promise((function(i,a){if(e.menuObj.isShow){var s={name:t,page:1,pageSize:1e6};Object(c["r"])(s).then((function(t){200===t.code&&(e.goodsList=t.data.results,i())})).catch((function(t){a()}))}}))},closeDialog:function(){var t={isShowEdit:!1};this.$emit("closeMain",t)},resetForm:function(){this.editForm={timeBox:[],icon:"",course:""},this.goodsList=[]},beforeImgUpload:function(t){var e=this,i=["image/jpeg","image/png"].includes(t.type),a=t.size/1024/1024<2;return i?a?void this.$uploadFile.checkedFileMD5ByFile(t,(function(t){e.$set(e.editForm,"icon",t.url)})):(this.$message.error("图大小不能超过2MB!"),!1):(this.$message.error("图片只能是JPG或者PNG格式!"),!1)}},mounted:function(){},watch:{"menuObj.isShow":function(t,e){var i=this;t&&(this.$refs["editForm"]&&this.$refs["editForm"].resetFields(),this.menuObj.isEdit?(this.goodsList=[],console.log(JSON.stringify(this.menuObj.data)),this.editForm=JSON.parse(JSON.stringify(this.menuObj.data)),this.$set(this.editForm,"timeBox",[this.editForm.startTime,this.editForm.endTime]),this.getNowGoods(this.editForm.name).then((function(t){i.$set(i.editForm,"course",i.editForm.courseUuid)}))):this.resetForm())}}}),O=_,S=(i("9f8a"),Object(m["a"])(O,F,k,!1,null,"20e8116d",null)),x=S.exports,$={components:{editStarLive:x},data:function(){return{list:[],page:{page:1,limit:10,total:0},menuObj:{isShow:!1,isEdit:!1,data:{}},loading:!1}},mounted:function(){this.searchList()},methods:{searchList:function(){var t=this,e={page:this.page.page,pageSize:this.page.limit};this.loading=!0,Object(c["u"])(e).then((function(e){if(200===e.code)if(console.log("大咖直播"+JSON.stringify(e.data.results)),e.data&&e.data.count>0){var i=[e.data.results,e.data.count];t.list=i[0],t.page.total=i[1]}else{var a=[[],0];t.list=a[0],t.page.total=a[1]}t.loading=!1})).catch((function(e){t.loading=!1}))},changeWeight:function(t,e){var i=this,a=this.list.findIndex((function(e){return e.uuid==t.uuid})),s={uuid:t.uuid};if("up"==e){if(a-1<0)return void this.$message.error("已经是第一个了");s.swapCourseLiveUuid=this.list[a-1].uuid}else{if(a+1>this.list.length-1)return void this.$message.error("已经是最后一个了");s.swapCourseLiveUuid=this.list[a+1].uuid}Object(c["v"])(s).then((function(t){200===t.code&&(i.$message.success("成功"),i.searchList())}))},changeStatus:function(t){var e=this;this.loading=!0;var i={uuid:t.uuid};Object(c["s"])(i).then((function(t){200===t.code&&e.searchList(),e.loading=!1})).catch((function(t){e.loading=!1}))},showEdit:function(t,e){this.menuObj={isShow:!0,isEdit:!!t,data:t?e:{}}},del:function(t){var e=this;this.$confirm("确定删除?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var i={uuid:t};Object(c["t"])(i).then((function(t){200===t.code&&(e.$message.success("成功"),e.searchList())}))})).catch((function(){}))},changePage:function(t,e){this.page.limit=e,this.page.page=t,this.searchList()},closeMain:function(t){this.menuObj.isShow=!1}}},j=$,C=(i("da82"),Object(m["a"])(j,y,w,!1,null,"3e2b617b",null)),E=C.exports,L=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"all-user"},[i("el-row",{staticClass:"tc mt20"},[i("el-button",{staticClass:"mb20",attrs:{type:"primary",icon:"el-icon-setting",size:"small"},on:{click:function(e){return t.showEdit(0)}}},[t._v("新增栏目")])],1),i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"mt20 mb20",attrs:{data:t.list,border:"",stripe:""}},[i("el-table-column",{attrs:{type:"index",width:"60",label:"排序"}}),i("el-table-column",{attrs:{prop:"name",label:"栏目名称"}}),i("el-table-column",{attrs:{prop:"showNum",label:"首页展示数量"}}),i("el-table-column",{attrs:{label:"缩略图"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[i("div",{staticClass:"tableAvaterBox"},[a.courses&&a.courses[0]?i("img",{staticClass:"tableAvater",attrs:{src:a.courses[0].courseThumbnail,alt:""}}):t._e()])]}}])}),i("el-table-column",{attrs:{label:"创建时间"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.row;return[t._v("\n        "+t._s(t._f("formatDate")(i.updateTime))+"\n      ")]}}])}),i("el-table-column",{attrs:{label:"操作",width:"360px"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[i("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"向上",placement:"top"}},[i("el-button",{attrs:{icon:"el-icon-top",circle:""},on:{click:function(e){return t.changeWeight(a,"up")}}})],1),i("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"向下",placement:"top"}},[i("el-button",{attrs:{icon:"el-icon-bottom",circle:""},on:{click:function(e){return t.changeWeight(a,"down")}}})],1),i("el-button",{staticClass:"mt10",attrs:{icon:"el-icon-edit",type:"primary",size:"small"},on:{click:function(e){return t.showEdit(1,a)}}},[t._v("编辑\n        ")]),i("el-button",{staticClass:"mt10",attrs:{icon:"el-icon-delete",type:"danger",size:"small"},on:{click:function(e){return t.del(a.uuid)}}},[t._v("删除")])]}}])})],1),i("editOtherMenu",{attrs:{menuObj:t.menuObj},on:{closeMain:t.closeMain,freshParent:function(e){return t.searchList()}}})],1)},B=[],T=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("el-dialog",{staticClass:"small-form-item",attrs:{visible:t.menuObj.isShow,title:t.menuObj.isEdit?"编辑其他课程栏目":"新增其他课程栏目",width:"600px","close-on-click-modal":!1},on:{"update:visible":function(e){return t.$set(t.menuObj,"isShow",e)}}},[i("el-form",{ref:"editForm",staticClass:"otherForm",attrs:{inline:"",model:t.editForm,rules:t.rules,labelPosition:"right",labelWidth:"120px"}},[i("el-form-item",{attrs:{prop:"uuid",label:"选择栏目："}},[i("el-select",{attrs:{size:"small",clearable:""},on:{change:t.changeCourseList},model:{value:t.editForm.uuid,callback:function(e){t.$set(t.editForm,"uuid",e)},expression:"editForm.uuid"}},t._l(t.bannerType,(function(t,e){return i("el-option",{key:e,attrs:{label:t.name,value:t.uuid}})})),1)],1),i("el-form-item",{attrs:{prop:"showType",label:"排列方式："}},[i("el-radio-group",{on:{change:t.changeShowType},model:{value:t.editForm.showType,callback:function(e){t.$set(t.editForm,"showType",e)},expression:"editForm.showType"}},[i("el-radio",{attrs:{label:"1"}},[t._v("横排")]),i("el-radio",{attrs:{label:"2"}},[t._v("竖排")])],1),i("div",{staticClass:"tips"},[t._v("横排则独占一行显示，竖排则两个课程排一行")])],1),i("el-form-item",{attrs:{prop:"showNum",label:"展示数量："}},[i("el-select",{attrs:{size:"small",clearable:""},model:{value:t.editForm.showNum,callback:function(e){t.$set(t.editForm,"showNum",t._n(e))},expression:"editForm.showNum"}},[t._l(10,(function(e){return"1"===t.editForm.showType?i("el-option",{key:e,attrs:{label:e,value:e}}):t._e()})),t._l(t.numberList,(function(e){return"2"===t.editForm.showType?i("el-option",{key:e,attrs:{label:e,value:e}}):t._e()}))],2)],1),i("el-form-item",{attrs:{prop:"courseIdBox",label:"首页展示课程："}},[i("el-select",{attrs:{size:"small",multiple:"",filterable:"",clearable:""},model:{value:t.editForm.courseIdBox,callback:function(e){t.$set(t.editForm,"courseIdBox",e)},expression:"editForm.courseIdBox"}},t._l(t.courseList,(function(e,a){return e.courses&&0!==e.courses.length?i("el-option",{key:a,attrs:{label:e.courses[0].name,value:e.courses[0].uuid}}):t._e()})),1)],1)],1),i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"mt5",attrs:{data:t.list,stripe:"",border:""}},[i("el-table-column",{attrs:{prop:"courses[0].uuid",label:"id"}}),i("el-table-column",{attrs:{prop:"courses[0].name",label:"课程名称"}}),i("el-table-column",{attrs:{label:"操作",width:"200px"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"向上",placement:"top"}},[i("el-button",{attrs:{icon:"el-icon-top",circle:""},on:{click:function(i){return t.changeSort("up",e.$index)}}})],1),i("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"向下",placement:"top"}},[i("el-button",{attrs:{icon:"el-icon-bottom",circle:""},on:{click:function(i){return t.changeSort("down",e.$index)}}})],1),i("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(i){return t.del(e.row.uuid)}}},[t._v("删除")])]}}])})],1),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(e){return t.closeDialog()}}},[t._v("取 消")]),i("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.save()}}},[t._v("确 定")])],1)],1)],1)},N=[],z=(i("309f"),i("0b53"),i("6d57"),{props:{menuObj:{type:Object,default:function(){return{}}}},components:{},data:function(){return{loading:!1,roleList:[],list:[],time:[],bannerType:[],courseList:[],editForm:{courseIdBox:[],uuid:"",showNum:1,showType:"1"},numberList:[2,4,6,8,10],rules:{uuid:[{required:!0,message:"请选择栏目",trigger:"change"}],showType:[{required:!0,message:"请选择排列方式",trigger:"change"}],showNum:[{required:!0,message:"请选择展示数量",trigger:"change"}],courseIdBox:[{required:!0,message:"请选择展示课程",trigger:"change"}]}}},methods:{resetForm:function(){this.editForm={courseIdBox:[],uuid:"",showNum:1,showType:"1"}},save:function(){var t=this;this.$refs["editForm"].validate((function(e){if(!e)return console.log("error submit!!"),!1;if(t.editForm.courseIdBox&&0==t.editForm.courseIdBox.length)t.$message.error("课程不能为空");else if(t.editForm.courseIdBox.length<Number(t.editForm.showNum))t.$message.error("首页展示课程数量必须大于等于展示数量");else{var i={showType:t.editForm.showType,sectionUuid:t.editForm.uuid,showNum:t.editForm.showNum},a=[],s=!0,n=!1,o=void 0;try{for(var r,l=t.list[Symbol.iterator]();!(s=(r=l.next()).done);s=!0){var u=r.value;a.push(u.courses[0].uuid)}}catch(m){n=!0,o=m}finally{try{s||null==l.return||l.return()}finally{if(n)throw o}}i.courses=a,console.log(i);var d=null;t.menuObj.isEdit?(d=c["Z"],i.uuid=t.editForm.uuid):d=c["e"],d(i).then((function(e){200===e.code&&(t.$message.success("成功"),t.$emit("freshParent"),t.closeDialog())})).catch((function(t){}))}}))},changeShowType:function(t){this.editForm.showNum=2==t?2:1},del:function(t){var e=this.editForm.courseIdBox;e.splice(e.findIndex((function(e){return e==t})),1)},getColumnList:function(){var t=this,e={pageSize:1e4,enable:1};this.loading=!0,Object(c["P"])(e).then((function(e){200===e.code&&(e.data&&e.data.count>0?(console.log("栏目数据："+JSON.stringify(e.data.results)),t.bannerType=e.data.results):t.bannerType=[]),t.loading=!1})).catch((function(e){t.loading=!1}))},getEdietShowClass:function(){var t=this,e={pageSize:1e3,sectionUuid:this.editForm.uuid,status:1};this.loading=!0,Object(c["Sb"])(e).then((function(e){if(200===e.code)if(t.loading=!1,console.log("需要回显的课程数据："+JSON.stringify(e.data.results)),e.data&&e.data.count>0){var i=[],a=!0,s=!1,n=void 0;try{for(var o,r=e.data.results[Symbol.iterator]();!(a=(o=r.next()).done);a=!0){var l=o.value,c=l.courses&&0!==l.courses.length?l.courses[0]:[];i.push(c.uuid)}}catch(u){s=!0,n=u}finally{try{a||null==r.return||r.return()}finally{if(s)throw n}}t.$set(t.editForm,"courseIdBox",i),console.log(t.editForm.courseIdBox)}else t.$set(t.editForm,"courseIdBox",[])})).catch((function(e){t.loading=!1}))},changeSort:function(t,e){var i,a,s=JSON.parse(JSON.stringify(this.list));"up"==t&&(e-1<0?this.$message.error("已经是第一个了"):(i=[s[e-1],s[e]],s[e]=i[0],s[e-1]=i[1]));"down"==t&&(e+1>s.length-1?this.$message.error("已经是最后一个了"):(a=[s[e+1],s[e]],s[e]=a[0],s[e+1]=a[1]));this.$set(this,"list",s)},closeDialog:function(){var t={isShowEdit:!1};this.$emit("closeMain",t)},changeCourseList:function(){var t=this;this.getCourseList().then((function(){t.editForm.courseIdBox=[]})).catch((function(t){console.log(t)}))},getCourseList:function(t){var e=this;return new Promise((function(t,i){var a={pageSize:1e3,sectionUuid:e.editForm.uuid};Object(c["Sb"])(a).then((function(a){200===a.code&&(console.log("所有课程数据"+JSON.stringify(a.data.results)),a.data&&a.data.count>0?(e.courseList=a.data.results,t()):(e.courseList=[],e.editForm.courseIdBox=[],i()),i())})).catch((function(t){i()}))}))}},mounted:function(){this.getColumnList()},watch:{"editForm.courseIdBox":function(t){console.log(t),t&&0!==t.length?this.list=this.courseList.filter((function(e){var i=e.courses&&0!==e.courses.length?e.courses[0]:[];return t.includes(i.uuid)})):this.list=[]},"menuObj.isShow":function(t,e){var i=this;t&&(this.$refs["editForm"]&&this.$refs["editForm"].resetFields(),this.menuObj.isEdit?(this.editForm=JSON.parse(JSON.stringify(this.menuObj.data)),this.editForm.showType=""+this.editForm.showType,this.getCourseList().then((function(){i.getEdietShowClass()})).catch((function(t){console.log(t)}))):this.resetForm())}}}),D=z,P=(i("8839"),Object(m["a"])(D,T,N,!1,null,"90913334",null)),M=P.exports,I={components:{editOtherMenu:M},data:function(){return{loading:!1,list:[{id:1,name:"seine"},{id:12,name:"wanqn"}],page:{page:1,limit:10,total:0},menuObj:{isShow:!1,isEdit:!1,data:{}},chapterManageDia:!1}},mounted:function(){this.searchList()},methods:{del:function(t){var e=this;this.$confirm("确定删除?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var i={uuid:t};Object(c["V"])(i).then((function(t){200===t.code&&(e.$message.success("成功"),e.searchList())}))})).catch((function(){}))},searchList:function(){var t=this,e={page:this.page.page,pageSize:this.page.limit};this.loading=!0,Object(c["Tb"])(e).then((function(e){if(200===e.code)if(console.log("非固定栏目配置列表数据："+JSON.stringify(e.data.results)),e.data&&e.data.count>0){var i=[e.data.results,e.data.count];t.list=i[0],t.page.total=i[1]}else{var a=[[],0];t.list=a[0],t.page.total=a[1]}t.loading=!1})).catch((function(e){t.loading=!1}))},changeWeight:function(t,e){var i=this,a=this.list.findIndex((function(e){return e.uuid==t.uuid})),s={uuid:t.uuid};if("up"==e){if(a-1<0)return void this.$message.error("已经是第一个了");s.objUuid=this.list[a-1].uuid}else{if(a+1>this.list.length-1)return void this.$message.error("已经是最后一个了");s.objUuid=this.list[a+1].uuid}Object(c["D"])(s).then((function(t){200===t.code&&(i.$message.success("成功"),i.searchList())}))},showEdit:function(t,e){this.menuObj={isShow:!0,isEdit:!!t,data:t?e:{}}},changePage:function(t,e){this.page.limit=e,this.page.page=t,this.searchList()},openChapterManage:function(){this.chapterManageDia=!0},closeMain:function(t){this.menuObj.isShow=!1}}},J=I,W=(i("54ee"),Object(m["a"])(J,L,B,!1,null,"6b97e762",null)),U=W.exports,q=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"all-user"},[i("el-form",{attrs:{inline:""},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.searchList(e)}}},[i("el-form-item",{attrs:{label:"关键词"}},[i("el-input",{attrs:{placeholder:"关键词",size:"small",clearable:""},model:{value:t.searchParams.keyword,callback:function(e){t.$set(t.searchParams,"keyword",e)},expression:"searchParams.keyword"}})],1),i("el-form-item",{attrs:{label:"状态"}},[i("el-select",{attrs:{size:"small"},model:{value:t.searchParams.status,callback:function(e){t.$set(t.searchParams,"status",e)},expression:"searchParams.status"}},[i("el-option",{attrs:{label:"全部",value:""}}),i("el-option",{attrs:{label:"停用",value:"2"}}),i("el-option",{attrs:{label:"启用",value:"1"}})],1)],1),i("el-button",{staticClass:"ml40 mt5 mb20",attrs:{type:"success",icon:"el-icon-search",size:"small"},on:{click:t.searchList}},[t._v("查询")]),i("el-button",{staticClass:"ml40 mb20 mt4",attrs:{icon:"el-icon-setting",type:"primary",size:"small",plain:""},on:{click:t.resetParams}},[t._v("\n        重置")]),i("el-button",{staticClass:"ml40 mt5 mb20",attrs:{type:"primary",icon:"el-icon-plus",size:"small"},on:{click:function(e){return t.showEdit(0)}}},[t._v("添加")])],1),i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"mt20 mb20",attrs:{data:t.list,border:"",stripe:""}},[i("el-table-column",{attrs:{prop:"sortNum",label:"排序"}}),i("el-table-column",{attrs:{prop:"keyword",label:"关键词"}}),i("el-table-column",{attrs:{label:"创建时间"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.row;return[t._v("\n        "+t._s(t._f("formatDate")(i.createTime))+"\n      ")]}}])}),i("el-table-column",{attrs:{label:"是否是热搜词"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.row;return[t._v("\n        "+t._s(i.icon?"是":"否")+"\n      ")]}}])}),i("el-table-column",{attrs:{label:"是否是默认词"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.row;return[t._v("\n        "+t._s(i.isDefault?"是":"否")+"\n      ")]}}])}),i("el-table-column",{attrs:{label:"状态"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.row;return[t._v("\n        "+t._s(t._f("bannerStatus")(i.status))+"\n      ")]}}])}),i("el-table-column",{attrs:{label:"操作",width:"360px"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[i("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"向上",placement:"top"}},[i("el-button",{attrs:{icon:"el-icon-top",circle:""},on:{click:function(e){return t.changeWeight(a,"up")}}})],1),i("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"向下",placement:"top"}},[i("el-button",{attrs:{icon:"el-icon-bottom",circle:""},on:{click:function(e){return t.changeWeight(a,"down")}}})],1),i("el-button",{staticClass:"mt10",attrs:{icon:"el-icon-edit",type:"primary",size:"small"},on:{click:function(e){return t.showEdit(1,a)}}},[t._v("编辑")]),i("el-button",{staticClass:"mt10",attrs:{icon:"el-icon-info",type:"warning",size:"small"},on:{click:function(e){return t.changeStatus(a)}}},[t._v("\n          "+t._s(1===a.status?"停用":"启用"))]),i("el-button",{staticClass:"mt10",attrs:{icon:"el-icon-delete",type:"danger",size:"small"},on:{click:function(e){return t.del(a.uuid)}}},[t._v("删除")]),a.isDefault?t._e():i("el-button",{staticClass:"mt10",attrs:{icon:"el-icon-setting",type:"primary",size:"small"},on:{click:function(e){return t.setDefault(a.uuid)}}},[t._v("设置为默认词")])]}}])})],1),i("addKeyWord",{attrs:{menuObj:t.menuObj},on:{closeMain:t.closeMain,freshParent:function(e){return t.searchList()}}})],1)},R=[],A=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("el-dialog",{attrs:{visible:t.menuObj.isShow,title:"新增关键词",width:"600px","close-on-click-modal":!1},on:{"update:visible":function(e){return t.$set(t.menuObj,"isShow",e)}}},[i("el-form",{ref:"editForm",attrs:{model:t.editForm,rules:t.rules,labelPosition:"right",labelWidth:"130px"},nativeOn:{submit:function(t){t.preventDefault()}}},[i("el-form-item",{attrs:{prop:"keyword",label:"关键词：",rules:t.notEmptyBlur}},[i("el-input",{attrs:{placeholder:"关键词",clearable:"",size:"small"},model:{value:t.editForm.keyword,callback:function(e){t.$set(t.editForm,"keyword",e)},expression:"editForm.keyword"}})],1),i("el-form-item",{attrs:{prop:"icon",label:"是否是热搜词：",rules:t.notEmptyChange}},[i("el-radio-group",{model:{value:t.editForm.icon,callback:function(e){t.$set(t.editForm,"icon",e)},expression:"editForm.icon"}},[i("el-radio",{attrs:{label:!0}},[t._v("是")]),i("el-radio",{attrs:{label:!1}},[t._v("否")])],1)],1),i("el-form-item",{attrs:{prop:"status",label:"启用状态：",rules:t.notEmptyChange}},[i("el-radio-group",{model:{value:t.editForm.status,callback:function(e){t.$set(t.editForm,"status",e)},expression:"editForm.status"}},[i("el-radio",{attrs:{label:1}},[t._v("启用")]),i("el-radio",{attrs:{label:2}},[t._v("禁用")])],1)],1)],1),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(e){return t.closeDialog()}}},[t._v("取 消")]),i("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.save()}}},[t._v("确 定")])],1)],1)],1)},G=[],H={props:{menuObj:{type:Object,default:function(){return{}}}},components:{},data:function(){return{editForm:{keyword:"",icon:!0,status:null},rules:{},notEmptyBlur:[{required:!0,message:"不能为空",trigger:"blur"}],notEmptyChange:[{required:!0,message:"不能为空",trigger:"change"}]}},methods:{save:function(){var t=this;this.$refs["editForm"].validate((function(e){if(!e)return console.log("error submit!!"),!1;var i={keyword:t.editForm.keyword,status:+t.editForm.status,icon:t.editForm.icon};console.log(i);var a=null;t.menuObj.isEdit?(a=c["Db"],i.uuid=t.editForm.uuid):a=c["Ab"],a(i).then((function(e){200===e.code&&(t.$message.success("成功"),t.$emit("freshParent"),t.closeDialog())})).catch((function(t){}))}))},resetForm:function(){this.editForm={keyword:"",icon:!0,status:null}},closeDialog:function(){var t={isShowEdit:!1};this.$emit("closeMain",t)}},mounted:function(){},watch:{"menuObj.isShow":function(t,e){t&&(this.$refs["editForm"]&&this.$refs["editForm"].resetFields(),this.menuObj.isEdit?this.editForm=JSON.parse(JSON.stringify(this.menuObj.data)):this.resetForm())}}},V=H,K=(i("abd2"),Object(m["a"])(V,A,G,!1,null,"d784597a",null)),Z=K.exports,Q={components:{addKeyWord:Z},data:function(){return{list:[],searchParams:{},loading:!1,page:{page:1,limit:10,total:0},menuObj:{isShow:!1,isEdit:!1,data:{}}}},mounted:function(){this.searchList()},methods:{searchList:function(){var t=this,e={page:this.page.page,pageSize:1e3,status:this.searchParams.status,keyword:this.searchParams.keyword};this.loading=!0,Object(c["Eb"])(e).then((function(e){if(200===e.code)if(e.data&&e.data.count>0){var i=[e.data.results,e.data.count];t.list=i[0],t.page.total=i[1]}else{var a=[[],0];t.list=a[0],t.page.total=a[1]}t.loading=!1})).catch((function(e){t.loading=!1}))},changeWeight:function(t,e){var i=this,a=this.list.findIndex((function(e){return e.uuid==t.uuid})),s={uuid:t.uuid};if("up"==e){if(a-1<0)return void this.$message.error("已经是第一个了");s.swapHotSearchUuid=this.list[a-1].uuid}else{if(a+1>this.list.length-1)return void this.$message.error("已经是最后一个了");s.swapHotSearchUuid=this.list[a+1].uuid}Object(c["zb"])(s).then((function(t){200===t.code&&(i.$message.success("成功"),i.searchList())}))},showEdit:function(t,e){this.menuObj={isShow:!0,isEdit:!!t,data:t?e:{}}},changePage:function(t,e){this.page.limit=e,this.page.page=t,this.searchList()},changeStatus:function(t){var e=this;this.loading=!0;var i={uuid:t.uuid};Object(c["Bb"])(i).then((function(t){200===t.code&&e.searchList(),e.loading=!1})).catch((function(t){e.loading=!1}))},setDefault:function(t){var e=this,i={uuid:t};Object(c["gc"])(i).then((function(t){200===t.code&&(e.$message.success("成功"),e.searchList())}))},del:function(t){var e=this;this.$confirm("确定删除?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var i={uuid:t};Object(c["Cb"])(i).then((function(t){200===t.code&&(e.$message.success("成功"),e.searchList())}))})).catch((function(){}))},resetParams:function(){this.page.page=1,this.searchParams={},this.searchList()},closeMain:function(t){this.menuObj.isShow=!1}}},X=Q,Y=(i("e86b"),Object(m["a"])(X,q,R,!1,null,"59fcdcc2",null)),tt=Y.exports,et=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"all-user"},[i("el-row",{staticClass:"tc mt20"},[i("el-button",{staticClass:"mb20",attrs:{type:"primary",icon:"el-icon-plus",size:"small"},on:{click:function(e){return t.showEdit(0)}}},[t._v("新增猜你喜欢")])],1),i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"mt20 mb20",attrs:{data:t.list,border:"",stripe:""}},[i("el-table-column",{attrs:{prop:"sortNum",label:"排序"}}),i("el-table-column",{attrs:{prop:"name",label:"课程名称"}}),i("el-table-column",{attrs:{label:"封面"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[i("div",{staticClass:"tableAvaterBox"},[i("img",{staticClass:"tableAvater",attrs:{src:a.courseBanner,alt:""},on:{click:function(e){return t.$viewImage(a.courseBanner,"picture")}}})])]}}])}),i("el-table-column",{attrs:{label:"显示时间"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.row;return[t._v("\n        "+t._s(t._f("formatDate")(i.startTime))+" - "+t._s(t._f("formatDate")(i.endTime))+"\n      ")]}}])}),i("el-table-column",{attrs:{label:"状态"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.row;return[t._v("\n        "+t._s(t._f("bannerStatus")(i.status))+"\n      ")]}}])}),i("el-table-column",{attrs:{label:"操作",width:"360px"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[i("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"向上",placement:"top"}},[i("el-button",{attrs:{icon:"el-icon-top",circle:""},on:{click:function(e){return t.changeWeight(a,"up")}}})],1),i("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"向下",placement:"top"}},[i("el-button",{attrs:{icon:"el-icon-bottom",circle:""},on:{click:function(e){return t.changeWeight(a,"down")}}})],1),i("el-button",{staticClass:"mt10",attrs:{icon:"el-icon-edit",type:"primary",size:"small"},on:{click:function(e){return t.showEdit(1,a)}}},[t._v("编辑\n        ")]),i("el-button",{staticClass:"mt10",attrs:{icon:"el-icon-info",type:"warning",size:"small"},on:{click:function(e){return t.changeStatus(a)}}},[t._v("\n          "+t._s(1===a.status?"停用":"启用"))]),i("el-button",{staticClass:"mt10",attrs:{icon:"el-icon-delete",type:"danger",size:"small"},on:{click:function(e){return t.del(a.uuid)}}},[t._v("删除")])]}}])})],1),i("pagination",{attrs:{currentPage:t.page.page,pageSize:t.page.limit,total:t.page.total},on:{change:t.changePage}}),i("editGuess",{attrs:{menuObj:t.menuObj},on:{closeMain:t.closeMain,freshParent:function(e){return t.searchList()}}})],1)},it=[],at=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("el-dialog",{attrs:{visible:t.menuObj.isShow,title:t.menuObj.isEdit?"编辑猜你喜欢":"新增猜你喜欢",width:"600px","close-on-click-modal":!1},on:{"update:visible":function(e){return t.$set(t.menuObj,"isShow",e)}}},[i("el-form",{ref:"editForm",attrs:{rules:t.rules,model:t.editForm,labelPosition:"right",labelWidth:"100px"}},[i("el-form-item",{attrs:{prop:"course",rules:t.notEmptyBlur,label:"选择课程："}},[i("el-select",{staticClass:"w200 ml10",attrs:{"remote-method":t.getNowGoods,placeholder:"请搜索课程名称",size:"small",filterable:"",remote:"","reserve-keyword":"",clearable:""},model:{value:t.editForm.course,callback:function(e){t.$set(t.editForm,"course",e)},expression:"editForm.course"}},t._l(t.goodsList,(function(t,e){return i("el-option",{key:e,attrs:{label:t.name,value:t.uuid}})})),1)],1),i("el-form-item",{attrs:{label:"展示时间：",prop:"timeBox",rules:t.notEmptyChange}},[i("el-date-picker",{attrs:{type:"datetimerange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","picker-options":t.disabledOptions,size:"small"},model:{value:t.editForm.timeBox,callback:function(e){t.$set(t.editForm,"timeBox",e)},expression:"editForm.timeBox"}})],1)],1),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(e){return t.closeDialog()}}},[t._v("取 消")]),i("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.save()}}},[t._v("确 定")])],1)],1)],1)},st=[],nt={props:{menuObj:{type:Object,default:function(){return{}}}},components:{},data:function(){return{editForm:{timeBox:[],course:""},goodsList:[],notEmptyBlur:[{required:!0,message:"不能为空",trigger:"blur"}],notEmptyChange:[{required:!0,message:"不能为空",trigger:"change"}],disabledOptions:{disabledDate:function(t){return t.getTime()<Date.now()-864e5}},rules:{}}},methods:{save:function(){var t=this;this.$refs["editForm"].validate((function(e){if(!e)return console.log("error submit!!"),!1;var i={course:t.editForm.course},a=t.$utils.formatDate(t.editForm.timeBox[0],"yyyy-MM-dd hh:mm:ss"),s=t.$utils.formatDate(t.editForm.timeBox[1],"yyyy-MM-dd hh:mm:ss"),n=[a,s];i.startTime=n[0],i.endTime=n[1],console.log(i);var o=null;t.menuObj.isEdit?(o=c["vb"],i.uuid=t.editForm.uuid):o=c["tb"],o(i).then((function(e){200===e.code&&(t.$message.success("成功"),t.$emit("freshParent"),t.closeDialog())})).catch((function(t){}))}))},getNowGoods:function(t){var e=this;return new Promise((function(i,a){if(e.menuObj.isShow){var s={name:t,page:1,pageSize:1e6};Object(c["xb"])(s).then((function(t){200===t.code&&(e.goodsList=t.data.results,i())})).catch((function(t){a()}))}}))},closeDialog:function(){var t={isShowEdit:!1};this.$emit("closeMain",t)},resetForm:function(){this.editForm={timeBox:[],course:""},this.goodsList=[]}},mounted:function(){},watch:{"menuObj.isShow":function(t,e){var i=this;t&&(this.$refs["editForm"]&&this.$refs["editForm"].resetFields(),this.menuObj.isEdit?(console.log(JSON.stringify(this.menuObj.data)),this.editForm=JSON.parse(JSON.stringify(this.menuObj.data)),this.$set(this.editForm,"timeBox",[this.editForm.startTime,this.editForm.endTime]),this.getNowGoods(this.editForm.name).then((function(t){i.$set(i.editForm,"course",i.editForm.courseUuid)}))):this.resetForm())}}},ot=nt,rt=(i("9eac"),Object(m["a"])(ot,at,st,!1,null,"5942b78a",null)),lt=rt.exports,ct={components:{editGuess:lt},data:function(){return{list:[],page:{page:1,limit:10,total:0},menuObj:{isShow:!1,isEdit:!1,data:{}},loading:!1}},mounted:function(){this.searchList()},methods:{searchList:function(){var t=this,e={page:this.page.page,pageSize:this.page.limit};this.loading=!0,Object(c["sb"])(e).then((function(e){if(200===e.code)if(console.log("猜你喜欢"+JSON.stringify(e.data.results)),e.data&&e.data.count>0){var i=[e.data.results,e.data.count];t.list=i[0],t.page.total=i[1]}else{var a=[[],0];t.list=a[0],t.page.total=a[1]}t.loading=!1})).catch((function(e){t.loading=!1}))},changeWeight:function(t,e){var i=this,a=this.list.findIndex((function(e){return e.uuid==t.uuid})),s={uuid:t.uuid};if("up"==e){if(a-1<0)return void this.$message.error("已经是第一个了");s.swapMayLikeUuid=this.list[a-1].uuid}else{if(a+1>this.list.length-1)return void this.$message.error("已经是最后一个了");s.swapMayLikeUuid=this.list[a+1].uuid}Object(c["wb"])(s).then((function(t){200===t.code&&(i.$message.success("成功"),i.searchList())}))},changeStatus:function(t){var e=this;this.loading=!0;var i={uuid:t.uuid};Object(c["rb"])(i).then((function(t){200===t.code&&e.searchList(),e.loading=!1})).catch((function(t){e.loading=!1}))},showEdit:function(t,e){this.menuObj={isShow:!0,isEdit:!!t,data:t?e:{}}},del:function(t){var e=this;this.$confirm("确定删除?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var i={uuid:t};Object(c["ub"])(i).then((function(t){200===t.code&&(e.$message.success("成功"),e.searchList())}))})).catch((function(){}))},changePage:function(t,e){this.page.limit=e,this.page.page=t,this.searchList()},closeMain:function(t){this.menuObj.isShow=!1}}},ut=ct,dt=(i("1255"),Object(m["a"])(ut,et,it,!1,null,"48149873",null)),mt=dt.exports,ft=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"all-user"},[i("el-form",{attrs:{inline:"","label-position":"right","label-width":"100px"},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.searchList(e)}}},[i("el-form-item",{attrs:{label:"模版名称"}},[i("el-input",{attrs:{size:"small",clearable:""},model:{value:t.searchParams.name,callback:function(e){t.$set(t.searchParams,"name",e)},expression:"searchParams.name"}})],1),i("el-form-item",{attrs:{label:"课程类型"}},[i("el-select",{attrs:{size:"small",clearable:""},model:{value:t.searchParams.mustReadType,callback:function(e){t.$set(t.searchParams,"mustReadType",e)},expression:"searchParams.mustReadType"}},t._l(t.courseTypeList,(function(t,e){return i("el-option",{key:e,attrs:{value:t.value,label:t.label}})})),1)],1),i("el-button",{staticClass:"ml40 mb20 mt4",attrs:{icon:"el-icon-search",type:"success",size:"small"},on:{click:t.searchList}},[t._v("查询\n    ")]),i("el-button",{staticClass:"ml40 mb20 mt4",attrs:{icon:"el-icon-setting",type:"primary",size:"small",plain:""},on:{click:t.resetParams}},[t._v("重置\n    ")]),i("el-button",{staticClass:"ml40 mb20 mt4",attrs:{icon:"el-icon-plus",type:"primary",size:"small"},on:{click:function(e){return t.showEdit(0)}}},[t._v("创建模板\n    ")])],1),i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"mb20",attrs:{data:t.list,border:"",stripe:""}},[i("el-table-column",{attrs:{prop:"name",label:"模版名称"}}),i("el-table-column",{attrs:{label:"课程类型"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.row;return[t._v("\n        "+t._s(t._f("courseType")(i.mustReadType))+"\n      ")]}}])}),i("el-table-column",{attrs:{prop:"content",label:"购买须知"}}),i("el-table-column",{attrs:{label:"操作",width:"320px"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[i("el-button",{staticClass:"mt10",attrs:{loading:a.loading,icon:"el-icon-edit",type:"primary",size:"small"},on:{click:function(e){return t.showEdit(1,a)}}},[t._v("编辑\n        ")])]}}])})],1),i("pagination",{attrs:{currentPage:t.page.page,pageSize:t.page.limit,total:t.page.total},on:{change:t.changePage}}),i("creat-template",{attrs:{editData:t.editData},on:{freshParent:function(e){t.page.page=1,t.searchList()},closeMain:t.closeMain}})],1)},ht=[],pt=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("el-dialog",{attrs:{visible:t.editData.isShow,title:t.editData.isEdit?"编辑购买须知":"新增购买须知",width:"500px","before-close":t.closeDialog,"close-on-click-modal":!1},on:{"update:visible":function(e){return t.$set(t.editData,"isShow",e)}}},[i("el-form",{ref:"editForm",attrs:{model:t.editForm,labelPosition:"right",labelWidth:"100px"}},[i("el-form-item",{attrs:{prop:"name",label:"模板名称",rules:t.notEmptyBlur}},[i("el-input",{attrs:{placeholder:"模板名称",size:"small",clearable:""},model:{value:t.editForm.name,callback:function(e){t.$set(t.editForm,"name","string"===typeof e?e.trim():e)},expression:"editForm.name"}})],1),i("el-form-item",{attrs:{label:"课程类型",prop:"mustReadType",disabled:t.editData.isEdit,rules:t.notEmptyChange}},[i("el-select",{attrs:{size:"small",clearable:"",disabled:t.editData.isEdit},model:{value:t.editForm.mustReadType,callback:function(e){t.$set(t.editForm,"mustReadType",t._n(e))},expression:"editForm.mustReadType"}},t._l(t.courseTypeList,(function(t,e){return i("el-option",{key:e,attrs:{value:t.value,label:t.label}})})),1)],1),i("el-form-item",{attrs:{label:"购买说明",prop:"content",rules:t.notEmptyBlur}},[i("el-input",{attrs:{type:"textarea",rows:5,placeholder:"购买说明",size:"small",clearable:""},model:{value:t.editForm.content,callback:function(e){t.$set(t.editForm,"content","string"===typeof e?e.trim():e)},expression:"editForm.content"}})],1)],1),i("el-row",{staticClass:"tc"},[i("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.saveBtn()}}},[t._v("确 定")])],1)],1)],1)},bt=[],gt={props:{editData:{type:Object,default:function(){return{}}}},components:{},data:function(){return{courseTypeList:i("db49").courseTypeList,editForm:{},notEmptyBlur:[{required:!0,message:"不能为空",trigger:"blur"}],notEmptyChange:[{required:!0,message:"不能为空",trigger:"change"}]}},methods:{saveBtn:function(){var t=this;this.$refs["editForm"].validate((function(e){if(!e)return console.log("error submit!!"),!1;var i={name:t.editForm.name,content:t.editForm.content,mustReadType:t.editForm.mustReadType},a=null;t.editData.isEdit?(a=c["Vb"],i.uuid=t.editData.data.uuid):a=c["Ub"],a(i).then((function(e){200===e.code&&(t.closeDialog(),t.$message.success("成功"),t.$emit("freshParent"))})).catch((function(t){}))}))},closeDialog:function(){this.$refs["editForm"].resetFields();var t={isShowEdit:!1};this.$emit("closeMain",t)}},watch:{"editData.isShow":function(t,e){t&&(this.$refs["editForm"]&&this.$refs["editForm"].resetFields(),this.editData.isEdit?(this.editForm=JSON.parse(JSON.stringify(this.editData.data)),this.editForm.mustReadType=this.editForm.mustReadType):this.editForm={name:"",content:"",mustReadType:""})}}},vt=gt,yt=(i("d5a0"),Object(m["a"])(vt,pt,bt,!1,null,"1318b1d3",null)),wt=yt.exports,Ft={components:{creatTemplate:wt},data:function(){return{loading:!1,searchParams:{},list:[],page:{page:1,limit:10,total:0},courseTypeList:i("db49").courseTypeList,editData:{isShow:!1,isEdit:!1,data:{}}}},mounted:function(){this.searchList()},methods:{searchList:function(){var t=this,e={page:this.page.page,pageSize:this.page.limit,name:this.searchParams.name,mustReadType:this.searchParams.mustReadType};this.loading=!0,Object(c["Wb"])(e).then((function(e){if(200===e.code)if(e.data&&e.data.count>0){console.log("数据："+JSON.stringify(e.data.results));var i=[e.data.results,e.data.count];t.list=i[0],t.page.total=i[1]}else{var a=[[],0];t.list=a[0],t.page.total=a[1]}t.loading=!1})).catch((function(e){t.loading=!1}))},showEdit:function(t,e){console.log(e),this.editData={isShow:!0,isEdit:!!t,data:t?e:{}}},changePage:function(t,e){this.page.limit=e,this.page.page=t,this.searchList()},resetParams:function(){this.searchParams={},this.searchList()},closeMain:function(t){this.editData.isShow=!1}}},kt=Ft,_t=Object(m["a"])(kt,ft,ht,!1,null,"4fc481a9",null),Ot=_t.exports,St={components:{bannerList:v,starLiveList:E,otherMenuList:U,keyWordList:tt,guessList:mt,purchaseInstruct:Ot},data:function(){return{activeName:"banner"}},watch:{},methods:{handleClick:function(t){}}},xt=St,$t=Object(m["a"])(xt,a,s,!1,null,"c1975f2e",null);e["default"]=$t.exports},1255:function(t,e,i){"use strict";var a=i("ff56"),s=i.n(a);s.a},4111:function(t,e,i){"use strict";var a=i("d9f6"),s=i.n(a);s.a},"41fc":function(t,e,i){},4530:function(t,e,i){},"54ee":function(t,e,i){"use strict";var a=i("e58b"),s=i.n(a);s.a},"5dd2":function(t,e,i){var a=i("81dc");t.exports=function(t,e){return new(a(t))(e)}},"62d3":function(t,e,i){"use strict";var a=i("f3ec"),s=i.n(a);s.a},"6df4":function(t,e,i){},"81dc":function(t,e,i){var a=i("fb68"),s=i("2346"),n=i("cb3d")("species");t.exports=function(t){var e;return s(t)&&(e=t.constructor,"function"!=typeof e||e!==Array&&!s(e.prototype)||(e=void 0),a(e)&&(e=e[n],null===e&&(e=void 0))),void 0===e?Array:e}},8839:function(t,e,i){"use strict";var a=i("0c8f"),s=i.n(a);s.a},"9eac":function(t,e,i){"use strict";var a=i("a58e"),s=i.n(a);s.a},"9f8a":function(t,e,i){"use strict";var a=i("f6a8"),s=i.n(a);s.a},a58e:function(t,e,i){},abd2:function(t,e,i){"use strict";var a=i("bc3e"),s=i.n(a);s.a},bc3e:function(t,e,i){},d5a0:function(t,e,i){"use strict";var a=i("6df4"),s=i.n(a);s.a},d9f6:function(t,e,i){},da82:function(t,e,i){"use strict";var a=i("4530"),s=i.n(a);s.a},db49:function(t,e,i){"use strict";i.r(e),i.d(e,"orderStatus",(function(){return a})),i.d(e,"refundStatus",(function(){return s})),i.d(e,"payStatus",(function(){return n})),i.d(e,"couponType",(function(){return o})),i.d(e,"courseTypes",(function(){return r})),i.d(e,"courseRights",(function(){return l})),i.d(e,"courseModality",(function(){return c})),i.d(e,"courseStatus",(function(){return u})),i.d(e,"checkStatus",(function(){return d})),i.d(e,"userStatus",(function(){return m})),i.d(e,"adminStatus",(function(){return f})),i.d(e,"userSource",(function(){return h})),i.d(e,"courseTypeList",(function(){return p})),i.d(e,"shareMoneyStatus",(function(){return b}));var a=[{value:1,label:"未发货"},{value:2,label:"已发货"},{value:3,label:"已完成"},{value:4,label:"申请退货中"},{value:5,label:"已退货"}],s=[{value:1,label:"等待处理"},{value:2,label:"退款成功"},{value:3,label:"退款财务不通过"},{value:4,label:"取消申请退款"}],n=[{value:1,label:"未付款"},{value:2,label:"已付款"},{value:3,label:"退款中"},{value:4,label:"已退款"},{value:5,label:"支付超时"},{value:6,label:"用户取消"},{value:7,label:"管理员取消"}],o=[{value:1,label:"单品券"},{value:2,label:"品类券"},{value:3,label:"通用券"}],r=[{value:1,label:"单次课"},{value:2,label:"系列课"}],l=[{value:1,label:"免费课"},{value:2,label:"VIP"},{value:3,label:"精品课"}],c=[{value:1,label:"直播课"},{value:2,label:"音频课"},{value:3,label:"视频课"}],u=[{value:1,label:"启用"},{value:2,label:"停用"},{value:3,label:"下架"}],d=[{value:1,label:"待审核"},{value:2,label:"审核通过"},{value:3,label:"审核未通过"},{value:4,label:"建议人工复审"}],m=[{value:1,label:"正常"},{value:2,label:"删除"},{value:3,label:"禁止登录"},{value:4,label:"禁止发言"}],f=[{value:1,label:"正常"},{value:2,label:"删除"},{value:3,label:"禁用"},{value:4,label:"非管理员"}],h=[{value:1,label:"H5"},{value:2,label:"App"},{value:3,label:"小程序"},{value:4,label:"老数据用户"}],p=[{value:1,label:"单次课"},{value:2,label:"系列课"},{value:3,label:"会员卡"},{value:4,label:"虚拟物品"},{value:5,label:"实物"},{value:6,label:"专题"}],b=[{value:1,label:"无分销"},{value:2,label:"未结算"},{value:3,label:"已结算"},{value:4,label:"已取消"}]},e204:function(t,e,i){"use strict";var a=i("e46b"),s=i("013f")(6),n="findIndex",o=!0;n in[]&&Array(1)[n]((function(){o=!1})),a(a.P+a.F*o,"Array",{findIndex:function(t){return s(this,t,arguments.length>1?arguments[1]:void 0)}}),i("0e8b")(n)},e58b:function(t,e,i){},e86b:function(t,e,i){"use strict";var a=i("41fc"),s=i.n(a);s.a},f3ec:function(t,e,i){},f6a8:function(t,e,i){},ff56:function(t,e,i){}}]);
//# sourceMappingURL=chunk-f60f9594.f2159ce1.js.map