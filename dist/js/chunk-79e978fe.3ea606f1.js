(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-79e978fe"],{"013f":function(t,e,a){var i=a("4ce5"),n=a("224c"),s=a("008a"),o=a("eafa"),r=a("5dd2");t.exports=function(t,e){var a=1==t,l=2==t,c=3==t,u=4==t,d=6==t,p=5==t||d,m=e||r;return function(e,r,f){for(var h,v,g=s(e),b=n(g),y=i(r,f,3),C=o(b.length),_=0,D=a?m(e,C):l?m(e,0):void 0;C>_;_++)if((p||_ in b)&&(h=b[_],v=y(h,_,g),t))if(a)D[_]=v;else if(v)switch(t){case 3:return!0;case 5:return h;case 6:return _;case 2:D.push(h)}else if(u)return!1;return d?-1:c||u?u:D}}},3031:function(t,e,a){},4521:function(t,e,a){"use strict";var i=a("fbd3"),n=a.n(i);n.a},4865:function(t,e,a){"use strict";var i=a("3031"),n=a.n(i);n.a},5918:function(t,e,a){"use strict";(function(t){a("5ab2"),a("6d57"),a("e10e"),a("9a33e"),a("ed63"),a("8cf2");var i=a("9d37"),n=a("08c1"),s=a("8732");function o(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,i)}return a}function r(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?o(Object(a),!0).forEach((function(e){Object(i["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):o(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}e["a"]={data:function(){return{content:"",sendLoading:!1,currentIndex:0,detailDia:!1}},components:{compereDiscussArea:s["a"]},props:{},mounted:function(){},computed:r({},Object(n["b"])({isSDKReady:function(t){return t.imInfo.isSDKReady},currentMessageList:function(t){return t.imInfo.currentMessageList},currentUserProfile:function(t){return t.imInfo.currentUserProfile},liveDetail:function(t){return t.imInfo.liveDetail},loadingChat:function(t){return t.imInfo.loadingChat},role:function(t){return t.imInfo.role}})),methods:{changePPT:function(t){console.log(t),this.currentIndex=t,["expert"].includes(this.role)&&5==this.liveDetail.updateStatus&&this.$store.dispatch("send",{type:"ppt-pos",content:t,duration:0})},operate:function(t){var e=t.split(",");1==e[1]&&this.$store.dispatch("MutePeople",{userId:this.currentMessageList[e[0]].from_uid,expire:600}),2==e[1]&&this.$store.dispatch("MutePeople",{userId:this.currentMessageList[e[0]].from_uid,expire:0})},sendCon:function(){var e=this;this.sendLoading=!0,this.$store.dispatch("send",{type:"txt",content:this.content,duration:0}).then((function(a){e.content="",t(".chatInputBox input")[0].focus(),e.sendLoading=!1})).catch((function(t){e.sendLoading=!1}))}}}}).call(this,a("debc"))},"5a01":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{width:"1200px"}},[a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("el-button",{attrs:{icon:"el-icon-back",type:"primary",size:"small"},on:{click:function(e){return t.$router.go(-1)}}},[t._v("\n        "+t._s("course"==t.type?" 返回课程列表":"返回章节列表")+"\n      ")]),a("el-form",{staticClass:"fr",attrs:{inline:""}},[5==t.liveDetail.updateStatus?a("el-form-item",{attrs:{label:"切换发言身份"}},[a("el-select",{staticClass:"ml10",attrs:{size:"small",clearable:""},on:{change:t.changeRole},model:{value:t.roleLive,callback:function(e){t.roleLive=e},expression:"roleLive"}},[a("el-option",{attrs:{label:"专家",value:"expert"}}),a("el-option",{attrs:{label:"主持人",value:"compere"}}),a("el-option",{attrs:{label:"普通用户",value:"normal"}})],1)],1):t._e()],1)],1),a("div",{staticClass:"text item"},[a("el-row",[a("el-col",{attrs:{span:6}},[t._v("\n          课程名称："+t._s(t.liveDetail.name)+"\n        ")]),t.liveDetail.experts?a("el-col",{attrs:{span:6}},[t._v("\n          主讲专家："+t._s(t.liveDetail.experts.name)+"\n        ")]):t._e(),a("el-col",{attrs:{span:6}},[t._v("\n          直播时间："+t._s(t._f("formatDate")(t.liveDetail.startTime))+"\n        ")]),a("el-col",{attrs:{span:6}},["6"==t.liveDetail.updateStatus?a("el-button",{staticClass:"fl mr10",attrs:{icon:"el-icon-info",type:"primary",size:"small"},on:{click:function(e){return t.changeLive(1)}}},[t._v("开始直播\n          ")]):t._e(),"5"==t.liveDetail.updateStatus?a("el-button",{staticClass:"fl",attrs:{icon:"el-icon-info",type:"primary",size:"small"},on:{click:function(e){return t.changeLive(0)}}},[t._v("结束直播\n          ")]):t._e()],1)],1)],1)]),a("div",{staticClass:"mt20 liveBody"},[a("chat"),a(t.componentsName,{tag:"component"})],1)],1)},n=[],s=(a("5ab2"),a("6d57"),a("e10e"),a("ed63"),a("8cf2"),a("9d37")),o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loadingChat,expression:"loadingChat"}],staticClass:"chatWrapper"},[a("el-card",{staticClass:"box-card",staticStyle:{width:"600px"}},[a("div",{staticClass:"chatHeader"},[t._v("\n      "+t._s(t.liveDetail.name)+"\n    ")]),a("div",{staticClass:"liveTopBox"},[t.liveDetail.liveCourseBanner?[1==t.liveDetail.liveCourseBanner.sourceType?a("video",{staticClass:"widthSet",attrs:{src:t.liveDetail.liveCourseBanner.sourceUrl,controls:""}}):t._e(),2==t.liveDetail.liveCourseBanner.sourceType?a("audio",{staticClass:"widthSet",attrs:{src:t.liveDetail.liveCourseBanner.sourceUrl,controls:""}}):t._e(),4==t.liveDetail.liveCourseBanner.sourceType?a("img",{staticClass:"widthSet",attrs:{src:t.liveDetail.liveCourseBanner.sourceUrl,alt:""}}):t._e(),3==t.liveDetail.liveCourseBanner.sourceType?[a("el-carousel",{attrs:{"indicator-position":"none",autoplay:!1,height:"100%","initial-index":t.currentIndex},on:{change:t.changePPT}},t._l(t.liveDetail.liveCourseBanner.pptUrlList,(function(t,e){return a("el-carousel-item",{key:e},[a("img",{attrs:{src:t.imgUrl,alt:""}})])})),1),a("div",{staticClass:"pptNum"},[t._v(" "+t._s(t.currentIndex+1)+"/"+t._s(t.liveDetail.liveCourseBanner.pptUrlList.length))])]:t._e()]:a("div",{staticClass:"noText"},[t._v("当前没有课件")])],2),a("div",{staticClass:"chatCon"},[6==t.liveDetail.updateStatus?a("div",{staticClass:"divTip"},[t._v("直播未开始")]):t._e(),5==t.liveDetail.updateStatus?a("div",{staticClass:"divTip"},[t._v("直播中")]):t._e(),t._l(t.currentMessageList,(function(e,i){return"ppt-pos"!==e.type?a("div",{key:i},[a("div",{staticClass:"chatRow",class:t.currentUserProfile.userID==e.from_uid?"self":"other"},[a("div",{staticClass:"messageRow mt20"},[a("img",{staticClass:"avater",attrs:{src:e.avatar,alt:""}}),a("div",{staticClass:"info"},[a("el-dropdown",{staticClass:"mt2",attrs:{size:"small"},on:{command:t.operate}},[a("span",{staticClass:"el-dropdown-link"},[a("span",{staticStyle:{cursor:"pointer"}},[t._v(t._s(e.username))])]),5==t.liveDetail.updateStatus?a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",{attrs:{command:i+",1"}},[t._v("禁言")]),a("el-dropdown-item",{attrs:{command:i+",2"}},[t._v("取消禁言")])],1):t._e()],1),"txt"==e.type?a("div",{staticClass:"con mt2 txtBg"},[t._v("\n                "+t._s(e.content)+"\n              ")]):t._e(),"img"==e.type?a("div",{staticClass:"con mt2"},[a("img",{staticClass:"imgMsg",attrs:{src:e.content},on:{click:function(a){return t.$viewImage(e.content,"picture")}}})]):t._e(),"qna"==e.type?a("div",{staticClass:"con mt2 txtBg"},[e.question?a("p",[t._v("@"+t._s(e.question.username)+" "+t._s(e.question.content))]):t._e(),a("p",[t._v(t._s(e.content))])]):t._e(),"video"==e.type?a("div",{staticClass:"con mt2"},[a("video",{staticClass:"imgMsg video",attrs:{src:e.content,playsinline:"isiPhoneShowPlaysinline","x5-video-player-type":"h5-page","t7-video-player-type":"inline","webkit-playsinline":"isiPhoneShowPlaysinline","x-webkit-airplay":"allow",controls:"controls",preload:""}})]):t._e(),"voice"==e.type?a("div",{staticClass:"con mt2"},[a("audio",{staticStyle:{width:"200px",height:"35px"},attrs:{src:e.content,controls:""}})]):t._e(),a("div",{staticClass:"time mt2"},[t._v("\n                "+t._s(t._f("formatDate")(e.msg_time))+"\n              ")])],1)])])]):t._e()})),4==t.liveDetail.updateStatus?a("div",{staticClass:"divTip"},[t._v("直播结束")]):t._e()],2),5==t.liveDetail.updateStatus?a("div",{staticClass:"chatInput",on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.sendCon(e)}}},[a("div",{staticClass:"chatInput_left"},[a("el-input",{staticClass:"chatInputBox",model:{value:t.content,callback:function(e){t.content="string"===typeof e?e.trim():e},expression:"content"}})],1),a("el-button",{staticClass:"chatInput_Button",attrs:{type:"primary",loading:t.sendLoading},on:{click:t.sendCon}},[t._v("发送")]),"expert"==t.role?a("el-button",{staticClass:"chatInput_Button",attrs:{type:"primary"},on:{click:function(e){t.detailDia=!0}}},[t._v("讨论区\n      ")]):t._e()],1):t._e()]),a("compereDiscussArea",{attrs:{detailDia:t.detailDia},on:{"update:detailDia":function(e){t.detailDia=e},"update:detail-dia":function(e){t.detailDia=e}}})],1)},r=[],l=a("5918"),c=l["a"],u=(a("b335"),a("5511")),d=Object(u["a"])(c,o,r,!1,null,"18b04dd0",null),p=d.exports,m=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"waitCoat mr20"},[a("el-card",{staticClass:"box-card",staticStyle:{width:"540px"}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("马甲用户")]),a("el-button",{staticStyle:{float:"right",padding:"3px 0"},attrs:{type:"text"},on:{click:t.creatWaistCoat}},[t._v("创建")])],1),a("div",{staticClass:"text item"},[a("el-form",{ref:"form",attrs:{model:t.form,rules:t.rules,"label-width":"136px"}},[a("el-form-item",{attrs:{label:"发送用户",prop:"nickName",rules:t.notEmptyBlur}},[a("div",[a("el-input",{staticStyle:{width:"130px"},model:{value:t.form.nickName,callback:function(e){t.$set(t.form,"nickName",e)},expression:"form.nickName"}}),a("el-button",{staticClass:"ml10",attrs:{type:"primary",size:"small"},on:{click:t.random}},[t._v("随机马甲用户")]),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){t.chooseDia=!0}}},[t._v("选择马甲用户")])],1),t.form.avatar?a("img",{staticClass:"avater",attrs:{src:t.form.avatar,alt:""}}):t._e()]),a("el-form-item",{attrs:{label:"消息",prop:"content",rules:t.notEmptyBlur}},[a("el-input",{attrs:{type:"textarea",rows:"5"},model:{value:t.form.content,callback:function(e){t.$set(t.form,"content",e)},expression:"form.content"}})],1),a("el-form-item",{attrs:{label:"是否提问"}},[a("el-checkbox",{model:{value:t.form.checked,callback:function(e){t.$set(t.form,"checked",e)},expression:"form.checked"}})],1),a("div",{staticClass:"tc"},[a("el-button",{attrs:{type:"primary",loading:t.sendLoading},on:{click:t.send}},[t._v("发送")])],1)],1)],1)]),a("el-dialog",{attrs:{title:"创建马甲用户",visible:t.creatForm.creatDia,width:"30%","before-close":t.handleCloseCreat},on:{"update:visible":function(e){return t.$set(t.creatForm,"creatDia",e)}}},[a("el-form",{ref:"creatForm",attrs:{model:t.creatForm,rules:t.creatrules,"label-width":"136px"}},[a("el-form-item",{attrs:{label:"上传头像：",rules:t.notEmptyChange,prop:"avatar"}},[a("el-upload",{staticClass:"avatar-uploader",attrs:{action:"",accept:"image/png, image/jpeg","before-upload":t.beforeBgUpload}},[t.creatForm.avatar?a("img",{staticClass:"avatar",attrs:{src:t.creatForm.avatar}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),a("el-form-item",{attrs:{label:"用户昵称",rules:t.notEmptyBlur,prop:"nickName"}},[a("el-input",{attrs:{rows:"5"},model:{value:t.creatForm.nickName,callback:function(e){t.$set(t.creatForm,"nickName",e)},expression:"creatForm.nickName"}})],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:t.handleCloseCreat}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:t.creat}},[t._v("保存")])],1)],1),a("choose-waistCoat",{attrs:{chooseDia:t.chooseDia,chooseData:t.chooseData},on:{"update:chooseDia":function(e){t.chooseDia=e},"update:choose-dia":function(e){t.chooseDia=e},tellPar:t.tellPar}})],1)},f=[],h=a("3191"),v=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{attrs:{visible:t.chooseDia,title:"选择用户","append-to-body":"",width:"800px","before-close":t.handleClose},on:{"update:visible":function(e){t.chooseDia=e}}},[a("el-form",{attrs:{inline:"","label-position":"right","label-width":"100px"}},[a("el-row",[a("el-form-item",{attrs:{label:"查询关键字"}},[a("el-input",{attrs:{size:"small"},model:{value:t.nickName,callback:function(e){t.nickName=e},expression:"nickName"}})],1),a("el-button",{staticClass:"ml40 mt4 mb20",attrs:{icon:"el-icon-search",type:"primary",size:"small"},on:{click:t.searchList}},[t._v("查询\n      ")]),a("el-button",{staticClass:"ml40 mb20 mt4",attrs:{icon:"el-icon-setting",type:"primary",size:"small",plain:""}},[t._v("重置")])],1),a("el-row")],1),a("el-table",{staticClass:"mb20",attrs:{data:t.list,border:"",stripe:"","highlight-current-row":""},on:{"current-change":t.handleCurrentChange}},[a("el-table-column",{attrs:{prop:"userNum",label:"ID"}}),a("el-table-column",{attrs:{prop:"nickName",label:"昵称"}}),a("el-table-column",{attrs:{label:"头像"},scopedSlots:t._u([{key:"default",fn:function(t){var e=t.row;return[a("div",{staticClass:"tableAvaterBox"},[a("img",{staticClass:"tableAvater",attrs:{src:e.avatar,alt:""}})])]}}])})],1),a("pagination",{attrs:{currentPage:t.page.page,pageSize:t.page.limit,total:t.page.total},on:{change:t.changePage}}),a("div",{staticClass:"dialog-footer mt20 tc"},[a("el-button",{staticClass:"mr10",attrs:{type:"primary"},on:{click:t.save}},[t._v("确定")]),a("el-button",{staticClass:"mr10",attrs:{type:"primary"},on:{click:t.handleClose}},[t._v("取消")])],1)],1)},g=[],b={components:{},watch:{chooseDia:function(t){t&&this.searchList()}},props:{chooseData:{},chooseDia:!1},data:function(){return{nickName:"",list:[{id:1,name:"seine"},{id:12,name:"wanqn"}],page:{page:1,limit:10,total:0},selectData:[]}},created:function(){},methods:{handleClose:function(){this.$emit("update:chooseDia",!1)},changePage:function(t,e){this.page.limit=e,this.page.page=t,this.searchList()},searchList:function(){var t=this;Object(h["Ob"])({nickName:this.nickName}).then((function(e){t.loading=!1,200===e.code?(t.list=e.data.results,t.page.total=e.data.count):t.list=[]})).catch((function(e){t.list=[]}))},handleCurrentChange:function(t){this.selectData=[t]},save:function(){1===this.selectData.length?(this.$emit("tellPar",this.selectData[0]),this.handleClose()):this.$message.error("必须选择一个用户")}}},y=b,C=(a("721b"),Object(u["a"])(y,v,g,!1,null,"bbd3d180",null)),_=C.exports,D={components:{chooseWaistCoat:_},data:function(){return{form:{checked:!1},rules:{},creatForm:{creatDia:!1,avatar:""},creatrules:{},chooseData:{},notEmptyBlur:[{required:!0,message:"不能为空",trigger:"blur"}],notEmptyChange:[{required:!0,message:"不能为空",trigger:"change"}],sendLoading:!1,chooseDia:!1}},methods:{send:function(){var t=this;this.$refs["form"].validate((function(e){if(!e)return!1;if(t.form.uuid){var a=t.form.avatar,i=t.form.nickName,n=t.form.uuid;t.sendLoading=!0,t.$store.dispatch("send",{type:"txt",content:t.form.content,duration:0,maJia:!0,avatar:a,username:i,from_uid:n,checked:t.form.checked}).then((function(e){t.sendLoading=!1})).catch((function(e){t.sendLoading=!1}))}else t.$message.error("请先选择一个马甲用户")}))},handleCloseCreat:function(){this.creatForm.creatDia=!1},random:function(){var t=this;Object(h["Yb"])({}).then((function(e){200===e.code&&(t.$message.success("成功"),t.form=JSON.parse(JSON.stringify(e.data[0])))})).catch((function(t){}))},creatWaistCoat:function(){this.creatForm={creatDia:!0,avatar:""}},beforeBgUpload:function(t){var e=this;return t.type.includes("image")?(this.uploadLoading=!0,this.$uploadFile.checkedFileMD5ByFile(t,(function(t){t.url&&(console.log(e.creatForm),e.$set(e.creatForm,"avatar",t.url),e.uploadLoading=!1)})),!1):(this.$message.error("请上传图片"),!1)},tellPar:function(t){this.form=t},creat:function(){var t=this;this.$refs["creatForm"].validate((function(e){if(!e)return!1;var a={nickName:t.creatForm.nickName,avatar:t.creatForm.avatar};Object(h["Qb"])(a).then((function(e){200===e.code&&(t.$message.success("成功"),t.creatForm.creatDia=!1)})).catch((function(t){}))}))}}},w=D,x=(a("4865"),Object(u["a"])(w,m,f,!1,null,"b8591e46",null)),O=x.exports,k=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{width:"560px"}},[a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"clearfix",staticStyle:{overflow:"hidden"},attrs:{slot:"header"},slot:"header"},[a("el-upload",{ref:"courseWear",attrs:{action:"",limit:12,"before-upload":function(e){return t.beforeDocumentUpload("fileInfo",e)},multiple:""}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("添加课件")])],1)],1),a("el-table",{staticClass:"mt20 mb20",attrs:{data:t.fileListClass,border:"",stripe:""}},[a("el-table-column",{attrs:{prop:"name",label:"文件名字"}}),a("el-table-column",{attrs:{label:"文件大小"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n          "+t._s(e.row.fileSize)+"kb\n        ")]}}])}),a("el-table-column",{attrs:{label:"时长"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.duration?a("span",[t._v(" "+t._s(e.row.duration)+"s")]):t._e()]}}])}),a("el-table-column",{attrs:{label:"操作",width:"170px"},scopedSlots:t._u([{key:"default",fn:function(e){return[0!=e.$index?a("el-button",{attrs:{type:"text"},on:{click:function(a){return t.changeWeight(e.row,"up")}}},[a("span",{staticClass:"el-icon-top"})]):t._e(),e.$index!=t.fileListClass.length-1?a("el-button",{attrs:{type:"text"},on:{click:function(a){return t.changeWeight(e.row,"down")}}},[a("span",{staticClass:"el-icon-bottom"})]):t._e(),a("el-button",{staticClass:"mt10",attrs:{type:"text",size:"small"},on:{click:function(a){return t.delLiveCoursewar(e.row)}}},[t._v("删除")]),a("el-button",{staticClass:"mt10",attrs:{type:"text",size:"small",loading:e.row.sendLoading},on:{click:function(a){return t.send(e.$index,e.row)}}},[t._v(t._s(e.row.txtName))])]}}])})],1)],1)],1)},$=[],L=(a("e204"),a("163d"),a("cc57"),a("309f"),a("0b53"),a("08c1"));function j(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,i)}return a}function S(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?j(Object(a),!0).forEach((function(e){Object(s["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):j(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var P={data:function(){return{fileListClass:[],fileInfo:[]}},computed:S({},Object(L["b"])({liveDetail:function(t){return t.imInfo.liveDetail}})),mounted:function(){this.searchList()},methods:{searchList:function(){var t=this,e={uuid:this.liveDetail.liveRoomId};this.loadingAll=!0,Object(h["lb"])(e).then((function(e){if(t.loadingAll=!1,console.log("获取到接口的课件列表："+JSON.stringify(e)),200==e.code&&e.data.results){var a=[],i=!0,n=!1,s=void 0;try{for(var o,r=e.data.results[Symbol.iterator]();!(i=(o=r.next()).done);i=!0){var l=o.value;l.txtName="发送",a.push(l)}}catch(c){n=!0,s=c}finally{try{i||null==r.return||r.return()}finally{if(n)throw s}}t.fileListClass=a}else t.fileListClass=[]})).catch((function(e){t.loadingAll=!1,t.fileListClass=[],t.$message.error(e.msg)}))},beforeDocumentUpload:function(t,e){var a=this;return console.log(e),["video/mp4","audio/mp3"].includes(e.type)||e.type.includes("image")?(this.$uploadFile.checkedFileMD5ByFile(e,(function(t){if(t.url){console.log(t),a.uploadLoading=!0;var i=a.$utils.getFileInfo(e);a.$utils.getAudioDuration(t.url).then((function(n){var s={image:3,audio:1,video:2,txt:4},o={roomId:a.liveDetail.liveRoomId,name:e.name,sourceUrl:t.url,sourceType:s[i.sourceType],fileSize:Number((e.size/1024).toFixed(0)),duration:n};Object(h["d"])(o).then((function(t){a.uploadLoading=!1,200==t.code&&(a.$message.success("上传成功"),a.searchList())})).catch((function(t){a.uploadLoading=!1,a.$message.success(t.msg)}))}))}})),!1):(this.$message.error("请上传视频(mp4格式)/音频(mp3格式)/图片格式的文件"),!1)},changeWeight:function(t,e){var a=this,i=this.fileListClass.findIndex((function(e){return e.uuid==t.uuid})),n={uuid:t.uuid};n.swapUuid="up"==e?this.fileListClass[i-1].uuid:this.fileListClass[i+1].uuid,Object(h["y"])(n).then((function(t){200===t.code&&(a.$message.success("成功"),a.searchList())}))},delLiveCoursewar:function(t){var e=this;Object(h["U"])({uuid:t.uuid}).then((function(t){200==t.code&&(e.$message.success("删除成功"),e.searchList())})).catch((function(t){e.$message.success(t.msg)}))},send:function(t,e){var a=this;console.log("当前索引："+t);var i={3:"img",1:"voice",2:"video",4:"txt"};this.sendLoading=!0,this.$set(e,"sendLoading",!0),this.$store.dispatch("send",{type:i[e.sourceType],content:e.url,duration:e.duration}).then((function(t){a.$set(e,"sendLoading",!1),e.txtName="重新发送"})).catch((function(t){a.$set(e,"sendLoading",!1),e.txtName="重新发送"}))}}},I=P,N=(a("4521"),Object(u["a"])(I,k,$,!1,null,"dceefed0",null)),B=N.exports;function F(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,i)}return a}function E(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?F(Object(a),!0).forEach((function(e){Object(s["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):F(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var A={components:{chat:p,waistCoat:O,manageCourseware:B},watch:{},computed:E({},Object(L["b"])({liveDetail:function(t){return t.imInfo.liveDetail},isSDKReady:function(t){return t.imInfo.isSDKReady},role:function(t){return t.imInfo.role},currentUserProfile:function(t){return t.imInfo.currentUserProfile}})),data:function(){return{form:{},rules:{},componentsName:"",roleLive:"normal",type:""}},mounted:function(){this.type=this.$route.query.type,this.$store.commit("resetIm"),this.getLiveDetail()},beforeDestroy:function(){$vm.$store.dispatch("logoutIm")},methods:{canGoExpert:function(t){this.componentsName="manageCourseware",this.$store.commit("setRole",t),this.$store.dispatch("changeIdUpdateInfo")},changeRole:function(t){var e=this,a=this;["normal","compere"].includes(t)?(this.componentsName="normal"==t?"":"waistCoat",this.$store.commit("setRole",t),this.$store.dispatch("changeIdUpdateInfo")):"expert"==t&&this.$store.dispatch("hasExpert").then((function(i){"Online"==i.status?e.$confirm("当前直播间已有专家在线，是否继续进入并以专家身份同时使用？","提示",{confirmButtonText:"进入",cancelButtonText:"取消",type:"warning"}).then((function(){e.canGoExpert(t)})).catch((function(){a.roleLive=a.role,a.componentsName="normal"==a.role?"":"compere"==a.role?"waistCoat":"manageCourseware"})):e.canGoExpert(t)})).catch((function(t){e.roleLive=e.role,e.componentsName="normal"==e.role?"":"compere"==e.role?"waistCoat":"manageCourseware"}))},aboutLive:function(t){var e=JSON.parse(sessionStorage.getItem("userInfo"));5==t.updateStatus&&this.$store.dispatch("loginIm",e.uuid),4==t.updateStatus&&this.$store.dispatch("getJieKouMessageList",t.liveRoomId),6==t.updateStatus&&(this.$store.commit("setCurrentMessageList",[]),this.$store.state.imInfo.loadingChat=!1)},getLiveDetail:function(){var t=this;this.$store.state.imInfo.loadingChat=!0;var e="course"==this.type?h["jb"]:h["G"];e({uuid:this.$route.query.uuid}).then((function(e){if(200===e.code){console.log("直播课详情"+JSON.stringify(e.data)),t.$store.commit("setLiveDetail",e.data);var a=e.data;t.aboutLive(a)}else t.$store.commit("setLiveDetail",{}),t.$store.state.imInfo.loadingChat=!1})).catch((function(e){t.$store.commit("setLiveDetail",{}),t.$store.state.imInfo.loadingChat=!1}))},changeLive:function(t){var e=this,a=t?h["kc"]:h["db"];a({liveRoomId:this.liveDetail.liveRoomId}).then((function(t){200==t.code&&(e.$message.success("成功"),e.getLiveDetail())})).catch((function(t){}))}}},z=A,T=(a("adb5"),Object(u["a"])(z,i,n,!1,null,"1d17137c",null));e["default"]=T.exports},"5dd2":function(t,e,a){var i=a("81dc");t.exports=function(t,e){return new(i(t))(e)}},"62b1":function(t,e,a){},"6a2d":function(t,e,a){},"721b":function(t,e,a){"use strict";var i=a("6a2d"),n=a.n(i);n.a},"81dc":function(t,e,a){var i=a("fb68"),n=a("2346"),s=a("cb3d")("species");t.exports=function(t){var e;return n(t)&&(e=t.constructor,"function"!=typeof e||e!==Array&&!n(e.prototype)||(e=void 0),i(e)&&(e=e[s],null===e&&(e=void 0))),void 0===e?Array:e}},8732:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{attrs:{"close-on-click-modal":!1,visible:t.detailDia,title:"讨论区","append-to-body":"",width:"800px","before-close":t.handleClose},on:{"update:visible":function(e){t.detailDia=e}}},[a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loadingAll,expression:"loadingAll"}],staticClass:"box-card"},[a("p",{staticStyle:{padding:"15px","font-size":"15px"}},[t._v("只看问题")]),t.list&&0!==t.list.length?[t._l(t.list,(function(e,i){return a("div",{key:i,staticClass:"text item"},[a("div",{staticClass:"divLeft"},[a("img",{attrs:{src:e.avatar,alt:""}}),a("div",[a("span",{staticClass:"t1"},[t._v(t._s(e.username))]),a("span",{staticClass:"t2"},[t._v(" "+t._s(t._f("formatDate")(e.msg_time)))]),a("span",{staticClass:"t1"},[t._v(t._s(e.content))])])]),a("div",{staticClass:"divRight"},[5==t.liveDetail.updateStatus?a("el-dropdown",{staticClass:"mt2",attrs:{size:"small"},on:{command:t.operate}},[a("span",{staticClass:"el-dropdown-link",staticStyle:{"margin-right":"10px"}},[a("el-button",{attrs:{type:"text"}},[t._v("管理")])],1),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",{attrs:{command:i+",1"}},[t._v("禁言")]),a("el-dropdown-item",{attrs:{command:i+",2"}},[t._v("取消禁言")]),a("el-dropdown-item",{attrs:{command:i+",3"}},[t._v("删除")])],1)],1):t._e(),e.isWall?a("el-button",{attrs:{type:"text"}},[t._v("已上墙")]):a("el-button",{attrs:{type:"text"},on:{click:function(e){return t.wallOperate(i)}}},[t._v("上墙")])],1)])})),a("pagination",{attrs:{currentPage:t.page.page,pageSize:t.page.limit,total:t.page.total},on:{change:t.changePage}})]:[a("div",{staticStyle:{"text-align":"center","font-size":"14px","line-height":"50px"}},[t._v("暂无数据")])]],2)])},n=[],s=(a("5ab2"),a("e10e"),a("309f"),a("0b53"),a("6d57"),a("9a33e"),a("9d37")),o=a("3191"),r=a("08c1");function l(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,i)}return a}function c(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?l(Object(a),!0).forEach((function(e){Object(s["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):l(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var u={components:{},watch:{detailDia:function(t){t&&this.searchList()}},computed:c({},Object(r["b"])({liveDetail:function(t){return t.imInfo.liveDetail}})),props:{chooseData:{},detailDia:!1},data:function(){return{nickName:"",list:[],page:{page:1,limit:10,total:0},loadingAll:!1}},created:function(){},methods:{wallOperate:function(t){var e=this;this.$prompt("请输入内容","上墙",{confirmButtonText:"确定",cancelButtonText:"取消",inputValidator:function(t){return!!t},inputErrorMessage:"请输入内容"}).then((function(a){var i=a.value;e.loadingAll=!0,e.$store.dispatch("send",{type:"qna",content:i,duration:0,wallAsker:e.list[t]}).then((function(a){Object(o["Xb"])({uuid:e.list[t].from_uid,msgTime:e.list[t].msg_time}).then((function(t){e.$message.success("成功"),e.searchList(),e.loadingAll=!1})).catch((function(t){e.loadingAll=!1}))})).catch((function(t){e.loadingAll=!1}))}))},operate:function(t){var e=this,a=t.split(",");1!=a[1]?2!=a[1]?3==a[1]&&this.$store.dispatch("delRecordOne",{uuid:this.list[a[0]].from_uid,msgTime:this.list[a[0]].msg_time}).then((function(t){e.searchList()})):this.$store.dispatch("MutePeople",{userId:this.list[a[0]].from_uid,expire:0}):this.$store.dispatch("MutePeople",{userId:this.list[a[0]].from_uid,expire:600})},handleClose:function(){this.$emit("update:detailDia",!1)},changePage:function(t,e){this.page.limit=e,this.page.page=t,this.searchList()},searchList:function(){var t=this,e={uuid:this.liveDetail.liveRoomId,displayPos:"barrage",page:this.page.page,pageSize:this.page.limit,isQuestion:!0};this.loadingAll=!0,Object(o["a"])(e).then((function(e){t.loadingAll=!1,console.log("获取到接口的讨论列表："+JSON.stringify(e));var a=[];if(200==e.code&&e.data.results){var i=!0,n=!1,s=void 0;try{for(var o,r=e.data.results[Symbol.iterator]();!(i=(o=r.next()).done);i=!0){var l=o.value,c=JSON.parse(l.content);c.sequence=l.msgSeq,c.isWall=l.isWall,a.push(c)}}catch(p){n=!0,s=p}finally{try{i||null==r.return||r.return()}finally{if(n)throw s}}var u=[a,e.data.count];t.list=u[0],t.page.total=u[1]}else{var d=[[],0];t.list=d[0],t.page.total=d[1]}})).catch((function(e){t.loadingAll=!1;var a=[[],0];t.list=a[0],t.page.total=a[1],t.$message.error(e.msg)}))}}},d=u,p=(a("b061"),a("5511")),m=Object(p["a"])(d,i,n,!1,null,"50f03288",null);e["a"]=m.exports},adb5:function(t,e,a){"use strict";var i=a("e135"),n=a.n(i);n.a},b061:function(t,e,a){"use strict";var i=a("e856"),n=a.n(i);n.a},b335:function(t,e,a){"use strict";var i=a("62b1"),n=a.n(i);n.a},e135:function(t,e,a){},e204:function(t,e,a){"use strict";var i=a("e46b"),n=a("013f")(6),s="findIndex",o=!0;s in[]&&Array(1)[s]((function(){o=!1})),i(i.P+i.F*o,"Array",{findIndex:function(t){return n(this,t,arguments.length>1?arguments[1]:void 0)}}),a("0e8b")(s)},e856:function(t,e,a){},fbd3:function(t,e,a){}}]);
//# sourceMappingURL=chunk-79e978fe.3ea606f1.js.map