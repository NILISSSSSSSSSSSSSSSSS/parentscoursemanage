(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-047ae0ef"],{"013f":function(e,t,i){var a=i("4ce5"),n=i("224c"),o=i("008a"),s=i("eafa"),l=i("5dd2");e.exports=function(e,t){var i=1==e,r=2==e,c=3==e,u=4==e,d=6==e,p=5==e||d,m=t||l;return function(t,l,f){for(var v,h,b=o(t),g=n(b),y=a(l,f,3),_=s(g.length),w=0,S=i?m(t,_):r?m(t,0):void 0;_>w;w++)if((p||w in g)&&(v=g[w],h=y(v,w,b),e))if(i)S[w]=h;else if(h)switch(e){case 3:return!0;case 5:return v;case 6:return w;case 2:S.push(v)}else if(u)return!1;return d?-1:c||u?u:S}}},"0427":function(e,t,i){},"27bb":function(e,t,i){"use strict";var a=i("45c8"),n=i.n(a);n.a},3811:function(e,t,i){"use strict";var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("el-form",{ref:"form",staticClass:"demo-ruleForm",attrs:{model:e.form,"label-width":"136px"}},[i("el-form-item",{attrs:{label:"上传直播banner："}},[i("el-upload",{attrs:{action:"",limit:1,"before-upload":function(t){return e.beforeDocumentUpload("liveCourseBanner",t)}}},[i("el-button",{attrs:{size:"small",type:"primary",loading:e.loadingAll}},[e._v("点击上传")])],1),e.form.liveCourseBanner.name?i("div",{staticStyle:{"line-height":"1.7"}},[e._v("\n        上传结果: "+e._s(e.form.liveCourseBanner.name)+"\n      ")]):e._e(),i("div",{staticClass:"col-danger"},[e._v("支持上传视频(mp4格式),音频(mp3格式),ppt,图片")])],1)],1)],1)},n=[],o=(i("163d"),i("cc57"),i("ed63"),i("8cf2"),{components:{},props:{value:{type:Object,default:function(){return{}}}},data:function(){return{form:{liveCourseBanner:{}},loadingAll:!1}},created:function(){},watch:{value:function(e){e&&(this.form.liveCourseBanner=e)}},methods:{beforeDocumentUpload:function(e,t){var i=this;return console.log(t),["video/mp4","audio/mp3"].includes(t.type)||t.type.includes("image")||t.name.includes(".ppt")||t.name.includes(".pptx")?(this.loadingAll=!0,this.$uploadFile.checkedFileMD5ByFile(t,(function(a){if(a.url){console.log(a);var n=i.$utils.getFileInfo(t);i.$utils.getAudioDuration(a.url).then((function(o){var s={name:t.name,sourceUrl:a.url,sourceType:n.sourceType,fileSize:Number((t.size/1024).toFixed(0)),duration:o},l={video:1,audio:2,ppt:3,image:4};s.sourceType=l[s.sourceType],i.form[e]=s,i.loadingAll=!1,i.$emit("input",i.form[e])}))}})),!1):(this.$message.error("请上传视频(mp4格式)/音频(mp3格式)/ppt/图片格式的文件"),!1)}}}),s=o,l=i("5511"),r=Object(l["a"])(s,a,n,!1,null,null,null);t["a"]=r.exports},"45c8":function(e,t,i){},"5b82":function(e,t,i){},"5dd2":function(e,t,i){var a=i("81dc");e.exports=function(e,t){return new(a(e))(t)}},"81dc":function(e,t,i){var a=i("fb68"),n=i("2346"),o=i("cb3d")("species");e.exports=function(e){var t;return n(e)&&(t=e.constructor,"function"!=typeof t||t!==Array&&!n(t.prototype)||(t=void 0),a(t)&&(t=t[o],null===t&&(t=void 0))),void 0===t?Array:t}},"931d":function(e,t,i){},a652:function(e,t,i){"use strict";var a=i("5b82"),n=i.n(a);n.a},ab3b:function(e,t,i){"use strict";var a=i("931d"),n=i.n(a);n.a},c12b:function(e,t,i){"use strict";i.r(t);var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"all-user pr"},[i("el-tabs",{model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[i("el-tab-pane",{attrs:{label:"视频",name:"video",disabled:!["video"].includes(e.componentObj.mode)&&e.componentObj.isSelect}},[i("lession-storeManage",{attrs:{type:"video",isSelect:e.componentObj.isSelect},on:{selectSuccess:e.selectSuccess}})],1),i("el-tab-pane",{attrs:{label:"音频",name:"audio",disabled:!["audio"].includes(e.componentObj.mode)&&e.componentObj.isSelect}},[i("lession-storeManage",{attrs:{type:"audio",isSelect:e.componentObj.isSelect},on:{selectSuccess:e.selectSuccess}})],1),i("el-tab-pane",{attrs:{label:"直播课",name:"live",disabled:!["live"].includes(e.componentObj.mode)&&e.componentObj.isSelect}},[i("lession-storeManage",{attrs:{type:"live",isSelect:e.componentObj.isSelect},on:{selectSuccess:e.selectSuccess}})],1)],1)],1)},n=[],o=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"all-user"},[i("div",{staticClass:"tr"},[e.isSelect?e._e():i("el-button",{staticClass:"ml40 mb20 mt4",attrs:{icon:"el-icon-plus",type:"primary",size:"small"},on:{click:function(t){e.uploadLessionDia=!0}}},[e._v("\n          上传课件\n        ")])],1),i("el-form",{attrs:{inline:"","label-position":"right","label-width":"140px"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchList(t)}}},[i("el-row",[i("el-form-item",{attrs:{label:"课件名称"}},[i("el-input",{attrs:{size:"small"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),i("el-form-item",{attrs:{label:"课件生产时间范围"}},[i("el-date-picker",{attrs:{type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","value-format":"yyyy-MM-dd",size:"small"},model:{value:e.form.timBox,callback:function(t){e.$set(e.form,"timBox",t)},expression:"form.timBox"}})],1),i("el-button",{staticClass:"ml40 mb20 mt4",attrs:{icon:"el-icon-search",type:"primary",size:"small"},on:{click:e.searchList}},[e._v("查询\n      ")]),i("el-button",{staticClass:"ml40 mb20 mt4",attrs:{icon:"el-icon-setting",type:"primary",size:"small",plain:""},on:{click:e.resetParams}},[e._v("重置")])],1),i("el-row")],1),i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"multipleTable",staticClass:"mb20",attrs:{data:e.list,border:"",stripe:""},on:{"selection-change":e.handleSelectionChange}},[e.isSelect?i("el-table-column",{attrs:{type:"selection",width:"55"}}):e._e(),i("el-table-column",{attrs:{prop:"name",label:"课件名称"}}),i("el-table-column",{attrs:{label:"上传时间/备份时间"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row;return[e._v("\n         "+e._s(e._f("formatDate")(i.createTime))+"\n      ")]}}])}),i("el-table-column",{attrs:{label:"课件时长"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return["live"!==e.type?i("span",[e._v(" "+e._s(e.$utils.TimestampToTime(a.duration)))]):i("span",[e._v(e._s(e.$utils.TimestampToTime(a.courseDuration)))])]}}])}),"live"==e.type?i("el-table-column",{attrs:{label:"banner"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return a.bannerInfo?[e._v("\n         "+e._s(e._f("liveBannerType")(a.bannerInfo.sourceType))+"\n            "),[1,2].includes(a.bannerInfo.sourceType)?i("span",[e._v(" ("+e._s(e.$utils.TimestampToTime(a.bannerInfo.duration))+")")]):e._e(),[3].includes(a.bannerInfo.sourceType)?i("span",[e._v("( "+e._s(a.bannerInfo.pages)+"页 )")]):e._e()]:void 0}}],null,!0)}):e._e(),e.isSelect?e._e():i("el-table-column",{attrs:{label:"操作",width:"180px"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[i("el-button",{attrs:{icon:"el-icon-view",type:"primary",size:"small"},on:{click:function(t){return e.show(a)}}},[e._v("查看")]),i("el-button",{attrs:{icon:"el-icon-info",type:"danger",size:"small"},on:{click:function(t){return e.changeSta(a)}}},[e._v(e._s(0==a.enable?"启用":"停用"))])]}}],null,!1,4175174824)})],1),i("pagination",{attrs:{currentPage:e.page.page,pageSize:e.page.limit,total:e.page.total},on:{change:e.changePage}}),i("lessionStore-detail",{attrs:{editData:e.editData},on:{closeMain:e.closeMain}}),i("upload-lession",{attrs:{uploadLessionDia:e.uploadLessionDia,type:e.type},on:{"update:uploadLessionDia":function(t){e.uploadLessionDia=t},"update:upload-lession-dia":function(t){e.uploadLessionDia=t},freshParent:function(t){return e.searchList()}}})],1)},s=[],l=(i("cc57"),i("3191")),r=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{attrs:{visible:e.editData.isShow,title:"课件详情 ","append-to-body":"",width:"700px","before-close":e.closeDialog},on:{"update:visible":function(t){return e.$set(e.editData,"isShow",t)}}},[i("div",[i("div",{staticClass:"text item"},[i("el-row",{staticClass:"detailRow"},[i("el-col",{attrs:{span:24}},[e._v(" 课程名称："+e._s(e.detail.name))]),i("el-row",[i("el-col",{attrs:{span:8}},[e._v(" 课程类型："+e._s("video"==e.editData.type?"视频课":"audio"==e.editData.type?"音频课":"直播课")+"\n          ")]),i("el-col",{attrs:{span:8}},[e._v(" 课程时长：\n            "),"live"!==e.editData.type?i("span",[e._v(" "+e._s(e.$utils.TimestampToTime(e.detail.duration)))]):i("span",[e._v(e._s(e.$utils.TimestampToTime(e.detail.courseDuration)))])]),i("el-col",{attrs:{span:8}},[e._v(" 上传时间： "+e._s(e._f("formatDate")(e.detail.createTime))+" ")])],1),i("el-col",{attrs:{span:24}},[e._v("\n          上传课件：\n          "),["video","audio"].includes(e.editData.type)?i("span",{staticClass:"linkSet",on:{click:function(t){return e.$viewImage(e.detail.sourceUrl,e.editData.type)}}},[e._v("预览")]):[i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"mb20",attrs:{data:e.list,border:"",stripe:""}},[i("el-table-column",{attrs:{prop:"name",label:"名字"}}),i("el-table-column",{attrs:{label:"大小"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[a.fileSize?i("span",[e._v(e._s(a.fileSize)+"kb")]):e._e()]}}])}),i("el-table-column",{attrs:{label:"时长"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[a.duration?i("span",[e._v(" "+e._s(e.$utils.TimestampToTime(a.duration)))]):e._e()]}}])}),i("el-table-column",{attrs:{label:"操作",width:"180px"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[i("el-button",{attrs:{type:"text",size:"small"},on:{click:function(t){return e.previewLiveCourseware(a)}}},[e._v("预览")])]}}])})],1),i("pagination",{attrs:{currentPage:e.page.page,pageSize:e.page.limit,total:e.page.total},on:{change:e.changePage}})]],2),"live"==e.editData.type&&e.detail.bannerInfo&&e.detail.bannerInfo.sourceUrl?i("el-col",{attrs:{span:24}},[e._v("\n          直播banner：\n          "),i("el-button",{attrs:{type:"text",size:"small"},on:{click:e.previewBanner}},[e._v("预览")])],1):e._e()],1)],1)]),i("previewSwiper",{attrs:{menuObj:e.menuObj},on:{closeMain:function(t){e.menuObj.isShow=!1}}})],1)},c=[],u=(i("ed63"),i("8cf2"),function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("el-dialog",{staticClass:"resetPwd",attrs:{visible:e.menuObj.isShow,title:"ppt预览",width:"750px","append-to-body":"","before-close":e.closeDialog},on:{"update:visible":function(t){return e.$set(e.menuObj,"isShow",t)}}},[i("el-carousel",{attrs:{height:"400px",interval:5e3,arrow:"always"}},e._l(e.bannerList,(function(e,t){return i("el-carousel-item",{key:t},[i("img",{staticStyle:{width:"100%",height:"100%"},attrs:{src:e.imgUrl,alt:""}})])})),1)],1)],1)}),d=[],p={props:{menuObj:{type:Object,default:function(){return{}}}},data:function(){return{bannerList:[]}},methods:{closeDialog:function(){this.$emit("closeMain")}},mounted:function(){},watch:{"menuObj.isShow":function(e,t){this.bannerList=e?this.menuObj.data:[]}}},m=p,f=(i("f581"),i("5511")),v=Object(f["a"])(m,u,d,!1,null,"53d225d0",null),h=v.exports,b={components:{previewSwiper:h},props:{editData:{type:Object,default:function(){return{}}}},data:function(){return{menuObj:{isShow:!1,data:[]},detail:{},list:[],loading:!1,page:{page:1,limit:10,total:0}}},created:function(){},watch:{"editData.isShow":function(e){e&&(this.detail=this.editData.data,"live"==this.editData.type&&this.getLiveCouseware())}},methods:{getLiveCouseware:function(){var e=this,t={page:this.page.page,pageSize:this.page.limit,liveCourseUuid:this.editData.data.uuid};this.loading=!0,Object(l["Ib"])(t).then((function(t){if(200===t.code)if(t.data&&t.data.count>0){console.log("直播课上传的课件："+JSON.stringify(t.data.results));var i=[t.data.results,t.data.count];e.list=i[0],e.page.total=i[1]}else{var a=[[],0];e.list=a[0],e.page.total=a[1]}e.loading=!1})).catch((function(t){e.loading=!1}))},previewLiveCourseware:function(e){if([1,2,3,4].includes(e.sourceType)){var t={1:"audio",2:"video",3:"picture",4:"txt"};this.$viewImage(e.sourceUrl,t[e.sourceType])}},previewBanner:function(){if([1,2,4].includes(this.detail.bannerInfo.sourceType)){var e={1:"video",2:"audio",4:"picture"};this.$viewImage(this.detail.bannerInfo.sourceUrl,e[this.detail.bannerInfo.sourceType])}[3].includes(this.detail.bannerInfo.sourceType)&&(1==this.detail.bannerInfo.pptType?window.open("http://view.officeapps.live.com/op/view.aspx?src=".concat(this.detail.bannerInfo.sourceUrl)):this.menuObj={isShow:!0,data:this.detail.bannerInfo.pptUrlList})},changePage:function(e,t){this.page.limit=t,this.page.page=e,this.searchList()},closeDialog:function(){var e={isShowEdit:!1};this.$emit("closeMain",e)}}},g=b,y=(i("a652"),Object(f["a"])(g,r,c,!1,null,"7dfb12f7",null)),_=y.exports,w=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{attrs:{visible:e.uploadLessionDia,title:"上传课件","append-to-body":"",width:"live"==e.type?"900px":"600px","before-close":e.handleClose},on:{"update:visible":function(t){e.uploadLessionDia=t}}},[i("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.uploadLoading,expression:"uploadLoading"}],ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"136px"}},[i("el-form-item",{attrs:{label:"课件名称：",prop:"name",rules:e.notEmptyBlur}},[i("el-input",{attrs:{size:"small",maxlength:64},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name","string"===typeof t?t.trim():t)},expression:"form.name"}})],1),i("el-form-item",{attrs:{label:"课程类型：",prop:"mode",rules:e.notEmptyChange}},[i("el-radio-group",{on:{change:function(t){e.form.fileListClass=e.form.bannerImg={}}},model:{value:e.form.mode,callback:function(t){e.$set(e.form,"mode",t)},expression:"form.mode"}},[i("el-radio",{attrs:{label:"video",disabled:"video"!==e.type}},[e._v("视频")]),i("el-radio",{attrs:{label:"audio",disabled:"audio"!==e.type}},[e._v("音频")]),i("el-radio",{attrs:{label:"live",disabled:"live"!==e.type}},[e._v("直播课")])],1)],1),i("el-form-item",{attrs:{label:"上传课件：",prop:"fileListClass",rules:e.notEmptyChange}},[i("el-upload",{ref:"courseWear",attrs:{action:"",limit:12,"before-upload":function(t){return e.beforeDocumentUpload("fileListClass",t)},multiple:"","on-remove":function(t){return e.handleRemovecourseware("fileListClass",t)},"on-exceed":e.handleExceed,"file-list":"live"!=e.form.mode?e.form.fileListClass:[]}},[i("el-button",{attrs:{size:"small",type:"primary"}},[e._v("点击上传")])],1),i("span",{staticStyle:{cursor:"pointer"},on:{click:function(t){return e.$viewImage(e.operateImg,"picture")}}},[e._v("TXT格式文件编辑说明")]),"live"==e.form.mode&&0!==e.form.fileListClass.length?[i("el-table",{staticClass:"mt20 mb20",attrs:{data:e.form.fileListClass,border:"",stripe:""}},[i("el-table-column",{attrs:{prop:"name",label:"文件名字"}}),i("el-table-column",{attrs:{label:"文件内容"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[3==a.sourceType?i("img",{staticClass:"widthSet",attrs:{src:a.sourceUrl}}):e._e(),2==a.sourceType?i("video",{staticClass:"widthSet",attrs:{src:a.sourceUrl,controls:""}}):e._e(),1==a.sourceType?i("audio",{staticClass:"widthSet",attrs:{src:a.sourceUrl,controls:""}}):e._e(),4==a.sourceType?i("span",{staticClass:"widthSet"},[e._v("\n                   "+e._s(a.sourceUrl)+"\n                ")]):e._e()]}}],null,!1,2572413081)}),i("el-table-column",{attrs:{label:"操作",width:"170px"},scopedSlots:e._u([{key:"default",fn:function(t){return[0!=t.$index?i("el-button",{attrs:{type:"text"},on:{click:function(i){return e.changeWeight(t.$index,t.$index-1)}}},[i("span",{staticClass:"el-icon-top"})]):e._e(),t.$index!=e.form.fileListClass.length-1?i("el-button",{attrs:{type:"text"},on:{click:function(i){return e.changeWeight(t.$index,t.$index+1)}}},[i("span",{staticClass:"el-icon-bottom"})]):e._e(),i("el-button",{staticClass:"mt10",attrs:{type:"text",size:"small"},on:{click:function(i){return e.delLiveCoursewar(t.$index)}}},[e._v("删除")])]}}],null,!1,552430749)})],1)]:e._e(),"live"==e.form.mode?i("div",{staticClass:"col-danger"},[e._v("支持上传视频(mp4格式),音频(mp3格式),图片,文本(txt,只支持 UTF 8、16)")]):e._e()],2),"live"==e.form.mode?[i("uploadLiveBanner",{model:{value:e.form.bannerImg,callback:function(t){e.$set(e.form,"bannerImg",t)},expression:"form.bannerImg"}})]:e._e()],2),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center"}},[i("el-button",{staticClass:"mr10",attrs:{size:"small",type:"primary",loading:e.loadingButton},on:{click:function(t){return e.save("form")}}},[e._v("保存")]),i("el-button",{staticClass:"mr10",attrs:{size:"small",type:"primary"},on:{click:e.handleClose}},[e._v("取消")])],1)],1)},S=[],x=(i("5ab2"),i("e10e"),i("9d37")),C=(i("309f"),i("0b53"),i("6d57"),i("163d"),i("e204"),i("3811"));function L(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,a)}return i}function O(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?L(Object(i),!0).forEach((function(t){Object(x["a"])(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):L(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}var $={components:{uploadLiveBanner:C["a"]},props:{uploadLessionDia:{type:Boolean,default:!1},type:{type:String,default:""}},data:function(){return{limit:1,current:"",form:{fileListClass:[],bannerImg:{}},loadingButton:!1,uploadLoading:!1,notEmptyBlur:[{required:!0,message:"不能为空",trigger:"blur"}],notEmptyChange:[{required:!0,message:"不能为空",trigger:"change"}],rules:{},operateImg:i("f343")}},created:function(){},watch:{uploadLessionDia:function(e){e&&(this.form={mode:this.type,cover:"",fileListClass:[],bannerImg:{}})}},methods:{handleClose:function(){this.$refs["form"]&&this.$refs["form"].resetFields(),this.$emit("update:uploadLessionDia",!1)},handleRemovecourseware:function(e,t,i){if(console.log(t),t&&"success"===t.status){var a=this.form[e].findIndex((function(e){return e.sourceUrl==t.sourceUrl}));this.form[e].splice(a,1)}},delLiveCoursewar:function(e){this.form["fileListClass"].splice(e,1)},changeWeight:function(e,t){var i=JSON.parse(JSON.stringify(this.form.fileListClass)),a=[i[t],i[e]];i[e]=a[0],i[t]=a[1],this.$set(this.form,"fileListClass",i)},beforeDocumentUpload:function(e,t){var i=this;return console.log(t),"video"!=this.form.mode||t.type.includes("mp4")?"audio"!=this.form.mode||t.type.includes("mp3")?"live"!=this.form.mode||"fileListClass"!=e||["video/mp4","audio/mp3"].includes(t.type)||t.type.includes("image")||t.type.includes("text/plain")?(this.$uploadFile.checkedFileMD5ByFile(t,(function(a){if(a.url){console.log(a),i.uploadLoading=!0;var n=i.$utils.getFileInfo(t);i.$utils.getAudioDuration(a.url).then((function(o){var s={name:t.name,sourceUrl:a.url,sourceType:"",fileSize:Number((t.size/1024).toFixed(0)),duration:o};if("live"!==i.form.mode){var l={audio:"2",video:"1",live:"3"};s.sourceType=l[n.sourceType],i.form[e]=[s]}else if("fileListClass"==e){var r={audio:1,video:2,image:3,txt:4};s.sourceType=r[n.sourceType],"txt"==n.sourceType?(console.log(i.$utils.txtFileFormat(t)),i.$utils.txtFileFormat(t).then((function(t){var a=!0,n=!1,o=void 0;try{for(var l,r=t[Symbol.iterator]();!(a=(l=r.next()).done);a=!0){var c=l.value,u=JSON.parse(JSON.stringify(s));u.name=u.fileSize=u.duration=null,u.sourceUrl=c,i.form[e].push(u)}}catch(d){n=!0,o=d}finally{try{a||null==r.return||r.return()}finally{if(n)throw o}}}))):i.form[e].push(s)}i.uploadLoading=!1}))}})),!1):(this.$message.error("请上传视频/音频/文本/图片格式的文件"),!1):(this.$message.error("请上传音频(MP3格式)的文件"),!1):(this.$message.error("请上传视频(MP4格式)的文件"),!1)},save:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return!1;if(0!=t.form.fileListClass.length){var i=null,a=null;if("live"!==t.form.mode)i=l["Fb"],a=O({},t.form.fileListClass[0]),a.name=t.form.name;else{i=l["Kb"];var n=[],o={},s=!0,r=!1,c=void 0;try{for(var u,d=t.form.fileListClass[Symbol.iterator]();!(s=(u=d.next()).done);s=!0){var p=u.value;n.push(O({},p))}}catch(m){r=!0,c=m}finally{try{s||null==d.return||d.return()}finally{if(r)throw c}}t.form.bannerImg&&t.form.bannerImg.sourceType&&(o=O({},t.form.bannerImg)),a={name:t.form.name,courseList:n,banner:o}}console.log(a),t.loadingButton=!0,i(a).then((function(e){t.loadingButton=!1,200===e.code&&(t.$message.success("成功"),t.handleClose(),t.$emit("freshParent"))})).catch((function(e){t.loadingButton=!1}))}else t.$message.error("必须上传课件")}))},handleExceed:function(e,t){this.$message.warning("最多只能上传一个文件")}}},D=$,T=(i("ab3b"),Object(f["a"])(D,w,S,!1,null,"5e832ed8",null)),j=T.exports,k={audio:"2",video:"1",live:"3"},I={components:{lessionStoreDetail:_,uploadLession:j},props:{type:{type:String,default:""},isSelect:{type:Boolean,default:!1}},data:function(){return{loading:!1,list:[],form:{timeBox:[]},page:{page:1,limit:10,total:0},editData:{isShow:!1,type:this.type,data:{}},detailDia:!1,uploadLessionDia:!1}},mounted:function(){this.searchList()},methods:{handleSelectionChange:function(e){this.$emit("selectSuccess",e)},searchList:function(){var e=this,t=this.$utils.formatRange(this.form.timBox),i={page:this.page.page,pageSize:this.page.limit,sourceType:k[this.type],searchTime_before:this.form.timBox?t[1]:null,searchTime_after:this.form.timBox?t[0]:null,name:this.form.name};this.loading=!0,this.isSelect&&(i.enable=1);var a="live"==this.type?l["Jb"]:l["Hb"];a(i).then((function(t){if(200===t.code)if(t.data&&t.data.count>0){console.log("课程库数据："+JSON.stringify(t.data.results));var i=[t.data.results,t.data.count];e.list=i[0],e.page.total=i[1]}else{var a=[[],0];e.list=a[0],e.page.total=a[1]}e.loading=!1})).catch((function(t){e.loading=!1}))},reset:function(){this.form={timeBox:[]},this.page.page=1,this.searchList()},changePage:function(e,t){this.page.limit=t,this.page.page=e,this.searchList()},changeSta:function(e){var t=this,i={uuid:e.uuid},a="live"==this.type?l["Lb"]:l["Gb"];a(i).then((function(e){200===e.code&&(t.$message.success("更改成功"),t.searchList())}))},resetParams:function(){this.page.page=1,this.form={timBox:[]},this.searchList()},closeMain:function(e){this.editData.isShow=!1},show:function(e){this.editData={isShow:!0,type:this.type,data:e}}}},B=I,z=Object(f["a"])(B,o,s,!1,null,"4eaf080a",null),P=z.exports,U={components:{lessionStoreManage:P},props:{componentObj:{type:Object,default:function(){return{isSelect:!1,mode:"live",dialogFormVisible:!1}}}},mounted:function(){this.activeName=this.componentObj.mode},watch:{"componentObj.dialogFormVisible":function(e){this.activeName=e?this.componentObj.mode:"video"}},data:function(){return{activeName:"video"}},methods:{selectSuccess:function(e){this.$emit("tellPar",e)},handleClick:function(){}}},F=U,E=(i("27bb"),Object(f["a"])(F,a,n,!1,null,"2801e74b",null));t["default"]=E.exports},e204:function(e,t,i){"use strict";var a=i("e46b"),n=i("013f")(6),o="findIndex",s=!0;o in[]&&Array(1)[o]((function(){s=!1})),a(a.P+a.F*s,"Array",{findIndex:function(e){return n(this,e,arguments.length>1?arguments[1]:void 0)}}),i("0e8b")(o)},f343:function(e,t,i){e.exports=i.p+"img/20200103153540.b9bd5cd1.gif"},f581:function(e,t,i){"use strict";var a=i("0427"),n=i.n(a);n.a}}]);
//# sourceMappingURL=chunk-047ae0ef.00f6afff.js.map