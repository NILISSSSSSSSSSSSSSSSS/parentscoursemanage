(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-b70c9760"],{"418d":function(t,e,a){},"8c2e":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"all-user"},[a("el-form",{attrs:{inline:"","label-position":"right","label-width":"100px"}},[a("el-row",[a("el-form-item",{attrs:{label:"用户昵称"}},[a("el-input",{attrs:{size:"small"},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.searchList(e)}},model:{value:t.searchParams.nickName,callback:function(e){t.$set(t.searchParams,"nickName",e)},expression:"searchParams.nickName"}})],1),a("el-form-item",{attrs:{label:"注册手机号"}},[a("el-input",{attrs:{size:"small"},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.searchList(e)}},model:{value:t.searchParams.tel,callback:function(e){t.$set(t.searchParams,"tel",e)},expression:"searchParams.tel"}})],1),a("el-form-item",{attrs:{label:"授权状态"}},[a("el-select",{attrs:{size:"small",placeholder:"请选择"},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.searchList(e)}},model:{value:t.searchParams.status,callback:function(e){t.$set(t.searchParams,"status",e)},expression:"searchParams.status"}},t._l(t.userStatus,(function(t,e){return a("el-option",{key:e,attrs:{value:t.value,label:t.label}})})),1)],1)],1),a("el-row",[a("el-form-item",{attrs:{label:"注册时间范围"}},[a("el-date-picker",{attrs:{type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","value-format":"yyyy-MM-dd",size:"small"},model:{value:t.searchParams.timBox,callback:function(e){t.$set(t.searchParams,"timBox",e)},expression:"searchParams.timBox"}})],1),a("el-button",{staticClass:"ml40 mb20 mt4",attrs:{icon:"el-icon-search",type:"primary",size:"small"},on:{click:t.searchList}},[t._v("查询\n      ")]),a("el-button",{staticClass:"ml40 mb20 mt4",attrs:{icon:"el-icon-setting",type:"primary",size:"small",plain:""},on:{click:t.resetParams}},[t._v("\n        重置")])],1)],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"mb20",attrs:{data:t.list,border:"",stripe:""}},[a("el-table-column",{attrs:{prop:"userNum",label:"id"}}),a("el-table-column",{attrs:{label:"用户昵称"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[t._v("\n        "+t._s(a.nickName)+"\n      ")]}}])}),a("el-table-column",{attrs:{label:"头像"},scopedSlots:t._u([{key:"default",fn:function(t){var e=t.row;return[a("div",{staticClass:"tableAvaterBox"},[a("img",{staticClass:"tableAvater",attrs:{src:e.avatar,alt:""}})])]}}])}),a("el-table-column",{attrs:{prop:"createTime",label:"注册日期"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[t._v("\n        "+t._s(t._f("formatDate")(a.createTime))+"\n      ")]}}])}),a("el-table-column",{attrs:{prop:"tel",label:"手机号"}}),a("el-table-column",{attrs:{label:"性别"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[t._v("\n        "+t._s(t._f("gender")(a.gender))+"\n      ")]}}])}),a("el-table-column",{attrs:{label:"授权状态",width:"150px"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[t._v("\n        "+t._s(t._f("status")(a.status))+"\n      ")]}}])}),a("el-table-column",{attrs:{label:"操作",width:"320px"},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.row;return[a("el-button",{staticClass:"mt10",attrs:{icon:"el-icon-view",type:"success",size:"small"},on:{click:function(e){return t.showUserDetail(s)}}},[t._v("查看用户\n        ")]),a("el-button",{staticClass:"mt10",attrs:{icon:"el-icon-view",type:"warning",size:"small"},on:{click:function(e){return t.changeStatus(s)}}},[t._v("\n          "+t._s(1===s.status?"禁用":"启用"))])]}}])})],1),a("pagination",{attrs:{currentPage:t.page.page,pageSize:t.page.limit,total:t.page.total},on:{change:t.changePage}}),a("user-detail",{attrs:{userDetailDia:t.userDetailDia},on:{"update:userDetailDia":function(e){t.userDetailDia=e},"update:user-detail-dia":function(e){t.userDetailDia=e}}})],1)},i=[],l=a("3191"),r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{attrs:{visible:t.userDetailDia.isShow,title:"用户详情 ",top:"20px","append-to-body":"",width:"1100px","before-close":t.handleClose},on:{"update:visible":function(e){return t.$set(t.userDetailDia,"isShow",e)}}},[a("div",[a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("账号信息")])]),a("div",{staticClass:"text item"},[a("el-row",[a("el-col",{attrs:{span:5}},[a("img",{staticClass:"userLogo",attrs:{src:t.user.avatar}})]),a("el-col",{attrs:{span:19}},[a("el-row",[a("el-col",{staticClass:"mb10",attrs:{span:24}},[t._v("昵称："+t._s(t.user.nickName)+" \n                "),t.user.vipInfo.isVip?a("span",{staticClass:"ml20"},[t._v(t._s(t.user.vipInfo.isVip?"VIP":"")+" "+t._s(t.user.vipInfo.msg))]):t._e()]),a("el-col",{staticClass:"mb10",attrs:{span:24}},[t._v("性别："+t._s(t._f("gender")(t.user.gender)))]),a("el-col",{staticClass:"mb10",attrs:{span:24}},[t._v("注册时间："+t._s(t._f("formatDate")(t.user.createTime)))]),a("el-col",{attrs:{span:24}},[t._v("id："+t._s(t.user.userNum))])],1)],1)],1)],1)]),a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("消费记录")]),a("el-button",{staticStyle:{float:"right",padding:"3px 0"},attrs:{type:"text"},on:{click:function(e){t.consumptionRecordsDia=!t.consumptionRecordsDia}}},[t._v(" "+t._s(t.consumptionRecordsDia?"收起":"展开"))])],1),t.consumptionRecordsDia?a("div",{staticClass:"text item"},[a("el-table",{staticClass:"mb20",attrs:{data:t.consumptionRecords,border:"",stripe:""}},[a("el-table-column",{attrs:{label:"消费时间"},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.row;return[a("span",[t._v(t._s(t._f("formatDate")(s.createTime)))])]}}],null,!1,218328571)}),a("el-table-column",{attrs:{prop:"goodsName",label:"项目"}}),a("el-table-column",{attrs:{label:"金额"},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.row;return[a("span",[t._v(t._s(s.payPrice/100))])]}}],null,!1,1255641311)}),a("el-table-column",{attrs:{label:"状态"},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.row;return[a("span",[t._v(t._s(t._f("payStatus")(s.orderInfo.payStatus)))])]}}],null,!1,357237843)})],1),a("pagination",{attrs:{currentPage:t.shoppingPage.page,pageSize:t.shoppingPage.limit,total:t.shoppingPage.total},on:{change:t.changeShoppingPage}})],1):t._e()]),a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("分销记录")]),a("el-button",{staticStyle:{float:"right",padding:"3px 0"},attrs:{type:"text"},on:{click:function(e){t.distributionRecordsDia=!t.distributionRecordsDia}}},[t._v(t._s(t.distributionRecordsDia?"收起":"展开"))])],1),t.distributionRecordsDia?a("div",{staticClass:"text item"},[a("el-table",{staticClass:"mb20",attrs:{data:t.distributionRecords,border:"",stripe:""}},[a("el-table-column",{attrs:{prop:"nickName",label:"购买人账号"}}),a("el-table-column",{attrs:{prop:"id",label:"下单时间"},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.row;return[a("span",[t._v(t._s(t._f("formatDate")(s.createTime)))])]}}],null,!1,218328571)}),a("el-table-column",{attrs:{prop:"goodsName",label:"分销项目"}}),a("el-table-column",{attrs:{label:"付款金额"},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.row;return[a("span",[t._v(t._s(s.payPrice/100))])]}}],null,!1,1255641311)}),a("el-table-column",{attrs:{label:"分销提成"},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.row;return[a("span",[t._v(t._s(s.shareMoney/100))])]}}],null,!1,2048901991)}),a("el-table-column",{attrs:{label:"状态"},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.row;return[a("span",[t._v(t._s(t._f("shareMoneyStatus")(s.shareMoneyStatus)))])]}}],null,!1,1734399485)})],1),a("pagination",{attrs:{currentPage:t.sharePage.page,pageSize:t.sharePage.limit,total:t.sharePage.total},on:{change:t.changeSharePage}})],1):t._e()])],1)])},n=[],o={components:{},props:{userDetailDia:{type:Object,default:{}}},data:function(){return{consumptionRecords:[],distributionRecords:[],consumptionRecordsDia:!0,distributionRecordsDia:!0,user:{vipInfo:{isVip:!1}},shoppingPage:{page:1,limit:10,total:0},sharePage:{page:1,limit:10,total:0}}},computed:{isShow:function(){return this.userDetailDia.isShow}},created:function(){},watch:{isShow:function(t){t?(this.user=this.userDetailDia.data,this.getShopping(),this.getShare()):this.user={vipInfo:{}}},deep:!0,immediate:!0},methods:{getShopping:function(){var t=this,e={uuid:this.userDetailDia.data.uuid,page:this.shoppingPage.page,pageSize:this.shoppingPage.limit};Object(l["ib"])(e).then((function(a){console.log(e),200===a.code&&(t.consumptionRecords=a.data.results,t.shoppingPage.total=a.data.count)}))},getShare:function(){var t=this,e={uuid:this.userDetailDia.data.uuid,page:this.sharePage.page,pageSize:this.sharePage.limit};Object(l["pb"])(e).then((function(e){200===e.code&&(t.distributionRecords=e.data.results,t.sharePage.total=e.data.count)}))},changeShoppingPage:function(t,e){this.shoppingPage.limit=e,this.shoppingPage.page=t,this.getShopping()},changeSharePage:function(t,e){this.sharePage.limit=e,this.sharePage.page=t,this.getShare()},handleClose:function(){this.userDetailDia.isShow=!1,this.user={vipInfo:{}},this.$emit("update:userDetailDia",{})}}},c=o,u=(a("d5e8"),a("5511")),p=Object(u["a"])(c,r,n,!1,null,"81c1e08e",null),d=p.exports,h={components:{userDetail:d},data:function(){return{searchParams:{timBox:[]},loading:!1,list:[],page:{page:1,limit:10,total:0},userDetailDia:{uuid:"",isShow:!1},userStatus:[{label:"全部",value:""},{label:"禁用",value:"3"},{label:"启用",value:"1"}]}},mounted:function(){this.searchList()},methods:{searchList:function(){var t=this;this.time=this.time||[];var e=this.$utils.formatRange(this.searchParams.timBox),a={page:this.page.page,pageSize:this.page.limit,searchTime_after:this.searchParams.timBox?e[0]:null,searchTime_before:this.searchParams.timBox?e[1]:null,tel:this.searchParams.tel,status:this.searchParams.status,nickName:this.searchParams.nickName};this.loading=!0,Object(l["O"])(a).then((function(e){if(200===e.code)if(e.data&&e.data.count>0){var a=[e.data.results,e.data.count];t.list=a[0],t.page.total=a[1]}else{var s=[[],0];t.list=s[0],t.page.total=s[1]}t.loading=!1})).catch((function(e){t.loading=!1}))},changeStatus:function(t){var e=this,a={uuid:t.uuid,status:1===t.status?3:1};Object(l["C"])(a).then((function(t){200===t.code&&(e.$message.success("成功"),e.searchList())}))},showUserDetail:function(t){this.userDetailDia={data:t,isShow:!0}},changePage:function(t,e){this.page.limit=e,this.page.page=t,this.searchList()},resetParams:function(){this.page.page=1,this.searchParams={timBox:[]},this.searchList()}}},m=h,g=Object(u["a"])(m,s,i,!1,null,"6d4b6bde",null);e["default"]=g.exports},d5e8:function(t,e,a){"use strict";var s=a("418d"),i=a.n(s);i.a}}]);
//# sourceMappingURL=chunk-b70c9760.9298102e.js.map