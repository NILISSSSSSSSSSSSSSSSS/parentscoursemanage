(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6d1665b2"],{"3d9d":function(e,t,a){"use strict";var l=a("9ba6"),r=a.n(l);r.a},"8d5f":function(e,t,a){"use strict";a.r(t);var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"all-user"},[a("el-form",{attrs:{inline:"","label-position":"right","label-width":"100px"}},[a("el-form-item",{attrs:{label:"用户名："}},[a("el-input",{attrs:{placeholder:"用户名",size:"small",clearable:""},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchList(t)}},model:{value:e.searchParam.nickName,callback:function(t){e.$set(e.searchParam,"nickName","string"===typeof t?t.trim():t)},expression:"searchParam.nickName"}})],1),a("el-form-item",{attrs:{label:"用户ID："}},[a("el-input",{attrs:{placeholder:"用户ID",size:"small",clearable:""},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchList(t)}},model:{value:e.searchParam.userNum,callback:function(t){e.$set(e.searchParam,"userNum","string"===typeof t?t.trim():t)},expression:"searchParam.userNum"}})],1),a("el-form-item",{attrs:{label:"手机号："}},[a("el-input",{attrs:{placeholder:"手机号",size:"small",clearable:""},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchList(t)}},model:{value:e.searchParam.tel,callback:function(t){e.$set(e.searchParam,"tel","string"===typeof t?t.trim():t)},expression:"searchParam.tel"}})],1),a("el-form-item",{attrs:{label:"用户角色："}},[a("el-select",{attrs:{size:"small",clearable:""},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchList(t)}},model:{value:e.searchParam.roles,callback:function(t){e.$set(e.searchParam,"roles",t)},expression:"searchParam.roles"}},e._l(e.roleList,(function(e,t){return a("el-option",{key:t,attrs:{label:e.name,value:e.name}})})),1)],1),a("el-form-item",{attrs:{label:"用户状态："}},[a("el-select",{attrs:{size:"small",clearable:""},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchList(t)}},model:{value:e.searchParam.managerStatus,callback:function(t){e.$set(e.searchParam,"managerStatus",e._n(t))},expression:"searchParam.managerStatus"}},e._l(e.userStatus,(function(t,l){return 1===t.value||3===t.value?a("el-option",{key:l,attrs:{label:t.label,value:t.value}}):e._e()})),1)],1),a("el-form-item",{attrs:{label:"创建时间："}},[a("el-date-picker",{attrs:{type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","value-format":"yyyy-MM-dd",size:"small"},model:{value:e.time,callback:function(t){e.time=t},expression:"time"}})],1),a("el-button",{staticClass:"ml40 mb20",attrs:{type:"success",icon:"el-icon-search",size:"small"},on:{click:e.searchList}},[e._v("查询")]),a("el-button",{staticClass:"ml40 mb20",attrs:{type:"primary",icon:"el-icon-setting",size:"small",plain:""},on:{click:e.resetForm}},[e._v("重置")]),a("el-button",{staticClass:"ml40 mb20",attrs:{type:"primary",icon:"el-icon-plus",size:"small"},on:{click:function(t){return e.showEdit(0)}}},[e._v("添加管理员")])],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"mb20",attrs:{data:e.list,border:"",stripe:""}},[a("el-table-column",{attrs:{prop:"userNum",label:"用户ID"}}),a("el-table-column",{attrs:{prop:"nickName",label:"用户名"}}),a("el-table-column",{attrs:{prop:"roles",label:"用户角色",width:"200px"},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(t.row.roles,(function(t,l){return a("span",{key:l,staticClass:"mr10"},[e._v(e._s(t.name))])}))}}])}),a("el-table-column",{attrs:{prop:"tel",label:"手机号",width:"150px"}}),a("el-table-column",{attrs:{prop:"managerStatus",label:"状态"},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(e.userStatus,(function(l,r){return a("div",{key:r},[l.value===t.row.managerStatus?a("span",{class:1===t.row.managerStatus?"col-sucs":"col-danger"},[e._v(e._s(l.label))]):e._e()])}))}}])}),a("el-table-column",{attrs:{label:"创建时间",width:"170px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e._f("formatDate")(t.row.createTime)))])]}}])}),a("el-table-column",{attrs:{prop:"id",label:"操作",width:"200px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{icon:"el-icon-edit",type:"success",size:"small"},on:{click:function(a){return e.showEdit(1,t.row)}}},[e._v("编辑")]),a("el-button",{attrs:{icon:"el-icon-delete",type:"danger",size:"small"},on:{click:function(a){return e.deleteRole(t.row)}}},[e._v("删除")])]}}])})],1),a("editUserRoles",{attrs:{editData:e.editData},on:{closeMain:e.closeMain,refresh:e.searchList}}),a("pagination",{attrs:{currentPage:e.page.page,pageSize:e.page.limit,total:e.page.total},on:{change:e.changePage}})],1)},r=[],i=(a("5ab2"),a("6d57"),a("e10e"),a("9d37")),s=a("3191"),n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-dialog",{attrs:{visible:e.editData.isShow,title:e.editData.isEdit?"编辑管理员":"新增管理员",width:"500px","before-close":e.close,"close-on-click-modal":!1},on:{"update:visible":function(t){return e.$set(e.editData,"isShow",t)}}},[a("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.loadingTel,expression:"loadingTel"}],ref:"editForm",attrs:{inline:"",model:e.editForm,rules:e.rules,labelPosition:"right",labelWidth:"120px"}},[e.normalAdmin.isNormalAdmin?e._e():a("el-form-item",{attrs:{prop:"nickName",label:"用户名："}},[a("el-input",{attrs:{placeholder:"用户名",disabled:e.editData.isEdit,clearable:""},model:{value:e.editForm.nickName,callback:function(t){e.$set(e.editForm,"nickName","string"===typeof t?t.trim():t)},expression:"editForm.nickName"}})],1),a("el-form-item",{attrs:{prop:"roles",label:"用户角色："}},[a("el-select",{attrs:{multiple:"",clearable:""},model:{value:e.editForm.roles,callback:function(t){e.$set(e.editForm,"roles",t)},expression:"editForm.roles"}},e._l(e.roleList,(function(e,t){return a("el-option",{key:t,attrs:{label:e.name,value:e.uuid}})})),1)],1),a("el-form-item",{attrs:{prop:"tel",label:"手机号："}},[a("el-input",{attrs:{placeholder:"手机号",disabled:e.editData.isEdit,clearable:""},on:{input:function(t){return e.vertifyTel()}},model:{value:e.editForm.tel,callback:function(t){e.$set(e.editForm,"tel","string"===typeof t?t.trim():t)},expression:"editForm.tel"}})],1),e.normalAdmin.isNormalAdmin||e.editData.isEdit?e._e():a("el-form-item",{attrs:{prop:"passwd",label:"初始登录密码："}},[a("el-input",{attrs:{placeholder:"123456",clearable:""},model:{value:e.editForm.passwd,callback:function(t){e.$set(e.editForm,"passwd","string"===typeof t?t.trim():t)},expression:"editForm.passwd"}})],1),a("el-form-item",{attrs:{prop:"managerStatus",label:"用户状态："}},[a("el-radio-group",{model:{value:e.editForm.managerStatus,callback:function(t){e.$set(e.editForm,"managerStatus",e._n(t))},expression:"editForm.managerStatus"}},e._l(e.userStatus,(function(t,l){return 1===t.value||3===t.value?a("el-radio",{key:l,attrs:{label:t.value}},[e._v(e._s(t.label))]):e._e()})),1)],1)],1),a("el-row",{staticClass:"tc"},[a("el-button",{on:{click:function(t){e.editData.isShow=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary",loading:e.submitLoading},on:{click:e.save}},[e._v("确 定")])],1)],1)],1)},o=[];function u(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);t&&(l=l.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,l)}return a}function c(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?u(Object(a),!0).forEach((function(t){Object(i["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):u(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var d={props:{editData:{type:Object,default:function(){return{}}}},components:{},data:function(){var e=this,t=function(t,a,l){a||l(new Error("请输入手机号")),e.$utils.PHONE_REG.test(a)||l(new Error("手机号格式不正确")),l()},l=function(e,t,a){t?t.length<6&&a(new Error("密码不少于6位数")):a(new Error("请输入密码")),a()};return{roleList:[],submitLoading:!1,editForm:{passwd:"",nickName:"",tel:"",managerStatus:1,roles:[]},loadingTel:!1,normalAdmin:{isNormalAdmin:!1,uuid:""},userStatus:a("db49").adminStatus,rules:{nickName:[{required:!0,message:"请输入名称",trigger:"blur"}],tel:[{required:!0,validator:t,trigger:"blur"}],passwd:[{required:!0,validator:l,trigger:"blur"}],roles:[{required:!0,message:"请选择角色",trigger:"blur"}],managerStatus:[{required:!0,message:"请选择状态",trigger:"blur"}]}}},methods:{vertifyTel:function(){var e=this,t=this.editForm.tel;if(11==t.length){var a={tel:t};this.loadingTel=!0,Object(s["N"])(a).then((function(t){e.loadingTel=!1,200===t.code&&(1==t.data.status&&(e.normalAdmin={isNormalAdmin:!0,uuid:t.data.uuid},e.$message.success("该用户是普通用户，无需填写登录密码和用户名称")),2==t.data.status&&(e.normalAdmin={isNormalAdmin:!1,uuid:""}),3==t.data.status&&(e.$message.error(t.msg),e.normalAdmin={isNormalAdmin:!1,uuid:""}))})).catch((function(t){e.loadingTel=!1}))}},save:function(){var e=this;this.$refs["editForm"].validate((function(t){if(!t)return!1;if(e.editData.isEdit)e.edit();else{var a=null,l={};if(e.normalAdmin.isNormalAdmin){a=s["Rb"];var r=[e.normalAdmin.uuid,e.editForm.roles,e.editForm.managerStatus];l.uuid=r[0],l.roles=r[1],l.managerStatus=r[2]}else a=s["i"],l=c({},e.editForm);e.submitLoading=!0,a(l).then((function(t){e.submitLoading=!1,200===t.code&&(e.$message.success(t.msg||"新增成功"),e.close(),e.$emit("refresh"))})).catch((function(t){e.submitLoading=!1}))}}))},edit:function(){var e=this,t=c({},this.editForm);delete t.passwd,this.submitLoading=!0,Object(s["cb"])(t).then((function(t){if(e.submitLoading=!1,200===t.code){e.$message.success(t.msg||"编辑成功");var a=JSON.parse(sessionStorage.getItem("userInfo"));e.editForm.uuid==a.uuid?(e.$message.success("编辑成功,请重新登录"),e.$utils.loginOutClear()):(e.close(),e.$emit("refresh"))}})).catch((function(t){e.submitLoading=!1}))},close:function(){this.$refs["editForm"].resetFields(),this.$emit("closeMain")},getRolesList:function(){var e=this,t={page:1,pageSize:1e5};Object(s["ob"])(t).then((function(t){200===t.code&&(e.roleList=t.data.results)}))}},mounted:function(){},computed:{newObj:function(){return this.getRolesList(),this.editData.isShow}},watch:{newObj:function(e,t){this.editData.isEdit?this.editForm={managerStatus:this.editData.data.managerStatus,nickName:this.editData.data.nickName,tel:this.editData.data.tel,roles:_.map(this.editData.data.roles,"uuid"),uuid:this.editData.data.uuid}:(this.editForm={nickName:"",tel:"",managerStatus:1,roles:[]},this.normalAdmin={isNormalAdmin:!1,uuid:""})}}},m=d,b=a("5511"),p=Object(b["a"])(m,n,o,!1,null,"99f919d4",null),f=p.exports;function h(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);t&&(l=l.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,l)}return a}function v(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?h(Object(a),!0).forEach((function(t){Object(i["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):h(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var g={components:{editUserRoles:f},data:function(){var e;return e={loading:!1,searchParam:{},roleList:[],roleId:"",adminUuid:sessionStorage.getItem("userInfo")?JSON.parse(sessionStorage.getItem("userInfo")).uuid:"",list:[]},Object(i["a"])(e,"roleList",[]),Object(i["a"])(e,"userStatus",a("db49").adminStatus),Object(i["a"])(e,"editData",{isShow:!1,isEdit:!1,data:{}}),Object(i["a"])(e,"time",[]),Object(i["a"])(e,"page",{page:1,limit:10,total:0}),e},methods:{searchList:function(){var e=this;this.time=this.time||[],this.searchParam.searchTime_after=this.$utils.formatRange(this.time)[0],this.searchParam.searchTime_before=this.$utils.formatRange(this.time)[1];var t=v({},this.searchParam,{pageSize:this.page.limit,page:this.page.page});this.loading=!0,Object(s["fb"])(t).then((function(t){e.loading=!1,200===t.code&&(e.list=t.data.results,e.page.total=t.data.count)})).catch((function(t){e.loading=!1}))},showEdit:function(e,t){this.editData.isShow=!0,this.editData={isShow:!0,isEdit:!!e,data:e?t:{}}},closeMain:function(){this.editData.isShow=!1},deleteRole:function(e){var t=this;this.$confirm("确定删除管理员【"+e.nickName+"】?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(s["bc"])({uuid:e.uuid}).then((function(e){200===e.code&&(t.$message.success(e.msg||"删除成功"),t.searchList())}))})).catch((function(){t.$message({type:"info",message:"已取消删除"})}))},changePage:function(e,t){this.page.limit=t,this.page.page=e,this.searchList()},getRolesList:function(){var e=this,t={page:1,pageSize:1e5};Object(s["ob"])(t).then((function(t){200===t.code&&(e.roleList=t.data.results)}))},resetForm:function(){this.searchParam={},this.time=[],this.searchList()}},created:function(){this.getRolesList(),this.searchList()}},y=g,k=(a("3d9d"),Object(b["a"])(y,l,r,!1,null,"51bd7f46",null));t["default"]=k.exports},"9ba6":function(e,t,a){},db49:function(e,t,a){"use strict";a.r(t),a.d(t,"orderStatus",(function(){return l})),a.d(t,"refundStatus",(function(){return r})),a.d(t,"payStatus",(function(){return i})),a.d(t,"couponType",(function(){return s})),a.d(t,"courseTypes",(function(){return n})),a.d(t,"courseRights",(function(){return o})),a.d(t,"courseModality",(function(){return u})),a.d(t,"courseStatus",(function(){return c})),a.d(t,"checkStatus",(function(){return d})),a.d(t,"userStatus",(function(){return m})),a.d(t,"adminStatus",(function(){return b})),a.d(t,"userSource",(function(){return p})),a.d(t,"courseTypeList",(function(){return f})),a.d(t,"shareMoneyStatus",(function(){return h}));var l=[{value:1,label:"未发货"},{value:2,label:"已发货"},{value:3,label:"已完成"},{value:4,label:"申请退货中"},{value:5,label:"已退货"}],r=[{value:1,label:"等待处理"},{value:2,label:"退款成功"},{value:3,label:"退款财务不通过"},{value:4,label:"取消申请退款"}],i=[{value:1,label:"未付款"},{value:2,label:"已付款"},{value:3,label:"退款中"},{value:4,label:"已退款"},{value:5,label:"支付超时"},{value:6,label:"用户取消"},{value:7,label:"管理员取消"}],s=[{value:1,label:"单品券"},{value:2,label:"品类券"},{value:3,label:"通用券"}],n=[{value:1,label:"单次课"},{value:2,label:"系列课"}],o=[{value:1,label:"免费课"},{value:2,label:"VIP"},{value:3,label:"精品课"}],u=[{value:1,label:"直播课"},{value:2,label:"音频课"},{value:3,label:"视频课"}],c=[{value:1,label:"启用"},{value:2,label:"停用"},{value:3,label:"下架"}],d=[{value:1,label:"待审核"},{value:2,label:"审核通过"},{value:3,label:"审核未通过"},{value:4,label:"建议人工复审"}],m=[{value:1,label:"正常"},{value:2,label:"删除"},{value:3,label:"禁止登录"},{value:4,label:"禁止发言"}],b=[{value:1,label:"正常"},{value:2,label:"删除"},{value:3,label:"禁用"},{value:4,label:"非管理员"}],p=[{value:1,label:"H5"},{value:2,label:"App"},{value:3,label:"小程序"},{value:4,label:"老数据用户"}],f=[{value:1,label:"单次课"},{value:2,label:"系列课"},{value:3,label:"会员卡"},{value:4,label:"虚拟物品"},{value:5,label:"实物"},{value:6,label:"专题"}],h=[{value:1,label:"无分销"},{value:2,label:"未结算"},{value:3,label:"已结算"},{value:4,label:"已取消"}]}}]);
//# sourceMappingURL=chunk-6d1665b2.a3abd948.js.map