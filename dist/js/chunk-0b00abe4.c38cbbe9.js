(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0b00abe4"],{"0197":function(e,t,a){"use strict";var l=a("36c2"),s=a.n(l);s.a},"0c4b":function(e,t,a){"use strict";var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-tree",{ref:"tree",attrs:{data:e.dataList,"show-checkbox":"","node-key":"uuid","default-expand-all":"","highlight-current":"",props:e.defaultProps},on:{"check-change":e.getChecked}})],1)},s=[],r=(a("163d"),a("3191")),i={props:{value:{type:Array,default:function(){return[]}},courseTags:{type:Array,default:function(){return[]}},tagType:{type:Number,default:1}},data:function(){return{dataList:[],defaultProps:{children:"children",label:"name"}}},watch:{value:function(e,t){this.$refs.tree.setCheckedKeys(e)},deep:!0},methods:{getList:function(){var e=this,t={tagType:this.tagType,pageSize:1e3,enable:!0};Object(r["lc"])(t).then((function(t){200===t.code&&(t.data&&t.data.count>0?e.dataList=e.$utils.toTree({allData:t.data.results,objKey:"uuid",parentNode:"parentUuid"}):e.dataList=[])})).catch((function(e){}))},getChecked:function(e,t,a){var l=this.$refs.tree.getCheckedKeys();this.$emit("input",l)}},mounted:function(){this.getList(),this.$refs.tree.setCheckedKeys(this.value)}},n=i,o=(a("0197"),a("5511")),c=Object(o["a"])(n,l,s,!1,null,"39b84cb7",null);t["a"]=c.exports},"36c2":function(e,t,a){},"600d":function(e,t,a){"use strict";var l=a("b7a4"),s=a.n(l);s.a},"677a":function(e,t,a){"use strict";a.r(t);var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"all-user"},[a("el-form",{attrs:{inline:"","label-position":"right","label-width":"100px"}},[a("el-form-item",{attrs:{label:"专家名"}},[a("el-input",{attrs:{size:"small",clearable:""},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchList(t)}},model:{value:e.searchParams.name,callback:function(t){e.$set(e.searchParams,"name",t)},expression:"searchParams.name"}})],1),a("el-form-item",{attrs:{label:"科室/专业"}},[a("el-input",{attrs:{size:"small",clearable:""},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchList(t)}},model:{value:e.searchParams.department,callback:function(t){e.$set(e.searchParams,"department",t)},expression:"searchParams.department"}})],1),a("el-form-item",{attrs:{label:"所在医院"}},[a("el-input",{attrs:{size:"small",clearable:""},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchList(t)}},model:{value:e.searchParams.hospital,callback:function(t){e.$set(e.searchParams,"hospital",t)},expression:"searchParams.hospital"}})],1),a("el-form-item",{attrs:{label:"手机号"}},[a("el-input",{attrs:{size:"small",clearable:""},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchList(t)}},model:{value:e.searchParams.tel,callback:function(t){e.$set(e.searchParams,"tel",t)},expression:"searchParams.tel"}})],1),a("el-form-item",{attrs:{label:"职称"}},[a("el-input",{attrs:{size:"small",clearable:""},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchList(t)}},model:{value:e.searchParams.jobTitle,callback:function(t){e.$set(e.searchParams,"jobTitle",t)},expression:"searchParams.jobTitle"}})],1),a("el-form-item",{attrs:{label:"是否明星专家"}},[a("el-select",{attrs:{size:"small",clearable:""},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchList(t)}},model:{value:e.searchParams.isStar,callback:function(t){e.$set(e.searchParams,"isStar",t)},expression:"searchParams.isStar"}},e._l(e.starList,(function(e,t){return a("el-option",{key:t,attrs:{value:e.value,label:e.label}})})),1)],1),a("el-form-item",{attrs:{label:"状态"}},[a("el-select",{attrs:{size:"small",clearable:""},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchList(t)}},model:{value:e.searchParams.enable,callback:function(t){e.$set(e.searchParams,"enable",t)},expression:"searchParams.enable"}},e._l(e.status,(function(e,t){return a("el-option",{key:t,attrs:{value:e.value,label:e.label}})})),1)],1),a("el-button",{staticClass:"ml40 mb20 mt4",attrs:{icon:"el-icon-search",type:"success",size:"small"},on:{click:e.searchList}},[e._v("查询\n    ")]),a("el-button",{staticClass:"ml40 mb20 mt4",attrs:{icon:"el-icon-setting",type:"primary",size:"small",plain:""},on:{click:e.resetParams}},[e._v("重置\n    ")]),a("el-button",{staticClass:"ml40 mb20 mt4",attrs:{icon:"el-icon-plus",type:"primary",size:"small"},on:{click:function(t){return e.showEdit(0)}}},[e._v("新增专家\n    ")])],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"mb20",attrs:{data:e.list,border:"",stripe:""}},[a("el-table-column",{attrs:{label:"专家头像"},scopedSlots:e._u([{key:"default",fn:function(e){var t=e.row;return[a("div",{staticClass:"tableAvaterBox"},[a("img",{staticClass:"tableAvater",attrs:{src:t.avatar,alt:""}})])]}}])}),a("el-table-column",{attrs:{prop:"name",label:"专家名称"}}),a("el-table-column",{attrs:{prop:"jobTitle",label:"职称"}}),a("el-table-column",{attrs:{prop:"department",label:"科室/专业"}}),a("el-table-column",{attrs:{prop:"hospital",label:"所在医院"}}),a("el-table-column",{attrs:{prop:"tel",label:"手机号"}}),a("el-table-column",{attrs:{label:"明星医师",width:"150px"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._v("\n        "+e._s(e._f("isStar")(a.isStar))+"\n      ")]}}])}),a("el-table-column",{attrs:{label:"状态"},scopedSlots:e._u([{key:"default",fn:function(t){var l=t.row;return[a("span",{class:l.enable?"col-sucs":"col-danger"},[e._v(e._s(e._f("enable")(l.enable)))])]}}])}),a("el-table-column",{attrs:{label:"操作",width:"320px"},scopedSlots:e._u([{key:"default",fn:function(t){var l=t.row;return[a("el-button",{staticClass:"mt10",attrs:{loading:l.loading,icon:"el-icon-edit",type:"primary",size:"small"},on:{click:function(t){return e.showEdit(1,l)}}},[e._v("编辑\n        ")]),a("el-button",{staticClass:"mt10",attrs:{icon:"el-icon-info",type:"danger",size:"small"},on:{click:function(t){return e.changeStatus(l)}}},[e._v("\n          "+e._s(l.enable?"禁用":"启用"))])]}}])})],1),a("pagination",{attrs:{currentPage:e.page.page,pageSize:e.page.limit,total:e.page.total},on:{change:e.changePage}}),a("editSpecial",{attrs:{editData:e.editData},on:{freshParent:function(t){e.page.page=1,e.searchList()},closeMain:e.closeMain}})],1)},s=[],r=(a("cc57"),a("3191")),i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-dialog",{attrs:{visible:e.editData.isShow,title:e.editData.isEdit?"编辑专家":"新增专家",width:"800px","before-close":e.closeDialog,"close-on-click-modal":!1},on:{"update:visible":function(t){return e.$set(e.editData,"isShow",t)}}},[a("el-form",{ref:"editForm",attrs:{inline:"",model:e.editForm,rules:e.rules,labelPosition:"right",labelWidth:"100px"}},[a("el-form-item",{attrs:{prop:"tel",label:"手机号："}},[a("el-input",{attrs:{size:"small",disabled:e.editData.isEdit,clearable:""},on:{input:e.checkAvater},model:{value:e.editForm.tel,callback:function(t){e.$set(e.editForm,"tel","string"===typeof t?t.trim():t)},expression:"editForm.tel"}})],1),a("el-row",{staticClass:"mt5"},[a("el-form-item",{staticClass:"el-col el-col-12 formRedStar",attrs:{prop:"avatar",label:"专家头像："}},[a("el-upload",{staticClass:"avatar-uploader",attrs:{action:"","show-file-list":!1,"before-upload":e.beforeImgUpload}},[e.editForm.avatar?a("img",{staticClass:"avatar course-avatar",attrs:{src:e.editForm.avatar}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon course-avatar"})])],1),a("el-form-item",{staticClass:"el-col el-col-12",attrs:{label:"专家介绍："}},[a("el-input",{staticClass:"w217",attrs:{maxlength:"1000",type:"textarea",rows:"7",size:"small",clearable:""},model:{value:e.editForm.intro,callback:function(t){e.$set(e.editForm,"intro","string"===typeof t?t.trim():t)},expression:"editForm.intro"}})],1)],1),a("el-row",[a("el-form-item",{staticClass:"el-col el-col-12",attrs:{prop:"name",label:"专家名称：",rules:e.notEmptyBlur}},[a("el-input",{attrs:{size:"small",clearable:""},model:{value:e.editForm.name,callback:function(t){e.$set(e.editForm,"name","string"===typeof t?t.trim():t)},expression:"editForm.name"}})],1),a("el-form-item",{staticClass:"el-col el-col-12",attrs:{prop:"hospital",label:"所在医院：",rules:e.notEmptyBlur}},[a("el-input",{attrs:{size:"small",clearable:""},model:{value:e.editForm.hospital,callback:function(t){e.$set(e.editForm,"hospital","string"===typeof t?t.trim():t)},expression:"editForm.hospital"}})],1)],1),a("el-row",[a("el-form-item",{staticClass:"el-col el-col-12",attrs:{prop:"department",label:"科室/专业：",rules:e.notEmptyBlur}},[a("el-input",{attrs:{size:"small",clearable:""},model:{value:e.editForm.department,callback:function(t){e.$set(e.editForm,"department","string"===typeof t?t.trim():t)},expression:"editForm.department"}})],1),a("el-form-item",{staticClass:"el-col el-col-12",attrs:{prop:"jobTitle",label:"职称：",rules:e.notEmptyBlur}},[a("el-input",{attrs:{size:"small",clearable:""},model:{value:e.editForm.jobTitle,callback:function(t){e.$set(e.editForm,"jobTitle","string"===typeof t?t.trim():t)},expression:"editForm.jobTitle"}})],1)],1),a("el-row",[a("el-form-item",{staticClass:"el-col el-col-12",attrs:{label:"专长："}},[a("el-input",{attrs:{maxlength:"100",type:"textarea",rows:"5",size:"small",clearable:""},model:{value:e.editForm.specialty,callback:function(t){e.$set(e.editForm,"specialty","string"===typeof t?t.trim():t)},expression:"editForm.specialty"}})],1),a("el-form-item",{staticClass:"el-col el-col-12",attrs:{prop:"enable",label:"状态：",rules:e.notEmptyChange}},[a("el-radio-group",{model:{value:e.editForm.enable,callback:function(t){e.$set(e.editForm,"enable",t)},expression:"editForm.enable"}},[a("el-radio",{attrs:{label:!0}},[e._v("启用")]),a("el-radio",{attrs:{label:!1}},[e._v("停用")])],1)],1)],1),a("el-row",[a("el-form-item",{staticClass:"el-col el-col-12",attrs:{prop:"tags",rules:e.notEmptyChange,label:"标签："}},[a("classifyTag",{staticClass:"mt5",attrs:{tagType:2},model:{value:e.editForm.tags,callback:function(t){e.$set(e.editForm,"tags",t)},expression:"editForm.tags"}})],1),a("el-form-item",{staticClass:"el-col el-col-12",attrs:{prop:"isStar",label:"明星专家："}},[a("el-switch",{attrs:{"active-text":"是","inactive-text":"否"},model:{value:e.editForm.isStar,callback:function(t){e.$set(e.editForm,"isStar",t)},expression:"editForm.isStar"}})],1)],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.closeDialog}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary",loading:e.loadingButton},on:{click:function(t){return e.save()}}},[e._v("确 定")])],1)],1)],1)},n=[],o=(a("ed63"),a("8cf2"),a("0c4b")),c={props:{editData:{type:Object,default:function(){return{}}}},components:{classifyTag:o["a"]},watch:{"editData.isShow":function(e,t){e&&(this.$refs["editForm"]&&this.$refs["editForm"].resetFields(),this.editData.isEdit?this.editForm=JSON.parse(JSON.stringify(this.editData.data)):this.resetForm())}},data:function(){var e=this,t=function(t,a,l){return a||0===a?e.$utils.PHONE_REG.test(a)?void l():l(new Error("手机号格式不正确")):l(new Error("手机号不能为空"))};return{loadingButton:!1,dataList:[],userList:[],editForm:{},notEmptyBlur:[{required:!0,message:"不能为空",trigger:"blur"}],notEmptyChange:[{required:!0,message:"请选择",trigger:"change"}],rules:{tel:[{required:!0,validator:t,trigger:"blur"}]}}},methods:{checkAvater:function(e){var t=this;if(11==e.length&&!this.editData.isEdit){var a={tel:e};Object(r["O"])(a).then((function(e){console.log(e),200===e.code&&e.data.count>0?(console.log(e),t.$set(t.editForm,"name",e.data.results[0].nickName),t.$set(t.editForm,"avatar",e.data.results[0].avatar)):(t.$set(t.editForm,"name",""),t.$set(t.editForm,"avatar",""))}))}},resetForm:function(){this.editForm={name:"",department:"",jobTitle:"",hospital:"",avatar:"",isStar:!1,enable:!1,intro:"",specialty:"",tags:[]}},save:function(){var e=this;this.$refs["editForm"].validate((function(t){if(!t)return console.log("error submit!!"),!1;if(e.editForm.avatar)if(0!=e.editForm.tags.length){var a=JSON.parse(JSON.stringify(e.editForm));console.log(a);var l=null;e.editData.isEdit?(l=r["ic"],a.uuid=e.editData.data.uuid):l=r["hc"],e.loadingButton=!0,l(a).then((function(t){e.loadingButton=!1,200===t.code&&(e.$message.success("成功"),e.closeDialog(),e.$emit("freshParent"))})).catch((function(t){e.loadingButton=!1}))}else e.$message.error("至少选择一个标签");else e.$message.error("必须上传头像")}))},beforeImgUpload:function(e){var t=this;console.log(e);var a=["image/jpeg","image/png"].includes(e.type),l=e.size/1024/1024<2;return a?l?void this.$uploadFile.checkedFileMD5ByFile(e,(function(e){e.url&&t.$set(t.editForm,"avatar",e.url)})):(this.$message.error("上传专家头像大小不能超过 2MB!"),!1):(this.$message.error("上传专家头像只能是 JPG或者PNG 格式!"),!1)},closeDialog:function(){var e={isShowEdit:!1};this.$emit("closeMain",e)}},mounted:function(){}},u=c,m=(a("600d"),a("5511")),d=Object(m["a"])(u,i,n,!1,null,"f29b3482",null),p=d.exports,h={components:{editSpecial:p},data:function(){return{loading:!1,searchParams:{},list:[],page:{page:1,limit:10,total:0},starList:[{label:"全部",value:""},{label:"是",value:"True"},{label:"否",value:"False"}],status:[{label:"全部",value:""},{label:"禁用",value:"False"},{label:"启用",value:"True"}],editData:{isShow:!1,isEdit:!1,data:{}}}},mounted:function(){this.searchList()},methods:{searchList:function(){var e=this,t={page:this.page.page,pageSize:this.page.limit,name:this.searchParams.name,hospital:this.searchParams.hospital,department:this.searchParams.department,jobTitle:this.searchParams.jobTitle,tel:this.searchParams.tel,enable:this.searchParams.enable,isStar:this.searchParams.isStar};this.loading=!0,Object(r["jc"])(t).then((function(t){if(200===t.code)if(t.data&&t.data.count>0){var a=[t.data.results,t.data.count];e.list=a[0],e.page.total=a[1]}else{var l=[[],0];e.list=l[0],e.page.total=l[1]}e.loading=!1})).catch((function(t){e.loading=!1}))},changeStatus:function(e){var t=this,a={uuid:e.uuid};Object(r["A"])(a).then((function(e){200===e.code&&(t.$message.success("成功"),t.searchList())}))},showEdit:function(e,t){console.log(t),this.editData={isShow:!0,isEdit:!!e,data:e?t:{}}},changePage:function(e,t){this.page.limit=t,this.page.page=e,this.searchList()},resetParams:function(){this.searchParams={},this.searchList()},closeMain:function(e){this.editData.isShow=!1}}},f=h,b=Object(m["a"])(f,l,s,!1,null,"65dea89b",null);t["default"]=b.exports},b7a4:function(e,t,a){}}]);
//# sourceMappingURL=chunk-0b00abe4.c38cbbe9.js.map